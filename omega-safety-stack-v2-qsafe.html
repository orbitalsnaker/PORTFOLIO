<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OMEGA SAFETY STACK v2.0 â€” Q-SAFE Â· build 1310</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500;700&family=Barlow+Condensed:wght@300;400;600;700;800&display=swap');

:root {
  --bg:       #040608;
  --bg2:      #080c12;
  --bg3:      #0c1219;
  --bg4:      #101820;
  --border:   #141e2b;
  --border2:  #1e2d40;
  --border3:  #253548;

  /* Primary palette â€” electric teal */
  --c:        #00d4ff;
  --c-dim:    rgba(0,212,255,0.15);
  --c-glow:   0 0 24px rgba(0,212,255,0.2);

  /* Status */
  --ok:       #00e87a;
  --ok-dim:   rgba(0,232,122,0.12);
  --warn:     #ffb800;
  --warn-dim: rgba(255,184,0,0.12);
  --crit:     #ff3060;
  --crit-dim: rgba(255,48,96,0.12);
  --pqc:      #b060ff;
  --pqc-dim:  rgba(176,96,255,0.12);

  --text:     #8aa8c0;
  --text2:    #c0d8ee;
  --text3:    #e8f4ff;

  --mono: 'JetBrains Mono', monospace;
  --head: 'Barlow Condensed', sans-serif;
  --body: 'Rajdhani', sans-serif;
}

* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior: smooth; }

body {
  font-family: var(--body);
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
  font-size: 14px;
  line-height: 1.5;
}

/* â”€â”€â”€ SCANLINES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body::after {
  content:'';
  position:fixed; inset:0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.03) 2px,
    rgba(0,0,0,0.03) 4px
  );
  pointer-events:none;
  z-index:9999;
}

/* â”€â”€â”€ SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sidebar {
  position: fixed;
  left:0; top:0; bottom:0;
  width: 200px;
  background: var(--bg2);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  z-index: 200;
}

.logo-block {
  padding: 20px 16px;
  border-bottom: 1px solid var(--border);
  position: relative;
  overflow: hidden;
}
.logo-block::before {
  content:'';
  position:absolute;
  top:0; left:0; right:0; height:1px;
  background: linear-gradient(90deg, transparent, var(--c), transparent);
}

.logo-v2 {
  font-family: var(--head);
  font-weight: 800;
  font-size: 20px;
  letter-spacing: 0.06em;
  color: var(--c);
  text-shadow: 0 0 20px rgba(0,212,255,0.6);
  display: flex;
  align-items: center;
  gap: 8px;
}

.logo-q {
  background: var(--pqc);
  color: #000;
  font-size: 10px;
  padding: 1px 5px;
  border-radius: 2px;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-shadow: none;
}

.logo-sub {
  font-family: var(--mono);
  font-size: 8px;
  color: var(--border3);
  letter-spacing: 0.2em;
  margin-top: 4px;
}

nav { flex:1; padding: 10px 0; overflow-y: auto; }

.nav-group {
  font-family: var(--mono);
  font-size: 7px;
  letter-spacing: 0.25em;
  color: var(--border3);
  padding: 10px 14px 4px;
  text-transform: uppercase;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  cursor: pointer;
  transition: all 0.12s;
  border-left: 2px solid transparent;
  font-family: var(--body);
  font-weight: 500;
  font-size: 13px;
  color: var(--text);
  letter-spacing: 0.02em;
  position: relative;
}

.nav-item:hover { color: var(--text2); background: rgba(255,255,255,0.02); }
.nav-item.active {
  color: var(--c);
  border-left-color: var(--c);
  background: var(--c-dim);
}

.nav-badge {
  margin-left: auto;
  font-family: var(--mono);
  font-size: 8px;
  padding: 1px 5px;
  border-radius: 2px;
  background: var(--crit-dim);
  color: var(--crit);
  border: 1px solid rgba(255,48,96,0.25);
}
.nav-badge.ok { background: var(--ok-dim); color: var(--ok); border-color: rgba(0,232,122,0.25); }
.nav-badge.new {
  background: var(--pqc-dim);
  color: var(--pqc);
  border-color: rgba(176,96,255,0.25);
  animation: badge-pulse 2s infinite;
}
@keyframes badge-pulse { 0%,100%{opacity:1} 50%{opacity:0.5} }

.nav-icon { width:15px; text-align:center; font-size:12px; opacity:.7; }

.sidebar-footer {
  padding: 12px 14px;
  border-top: 1px solid var(--border);
  font-family: var(--mono);
  font-size: 8px;
  color: var(--border3);
  line-height: 1.8;
}
.pulse-dot {
  display:inline-block; width:5px; height:5px;
  border-radius:50%; background:var(--ok);
  box-shadow: 0 0 6px var(--ok);
  margin-right:5px;
  animation: pulse-anim 2s infinite;
}
@keyframes pulse-anim { 0%,100%{transform:scale(1)} 50%{transform:scale(1.3)} }

/* â”€â”€â”€ MAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.main { margin-left: 200px; min-height: 100vh; }

.topbar {
  height: 46px;
  background: rgba(4,6,8,0.92);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  position: sticky;
  top:0;
  z-index:100;
}

.topbar-left {
  font-family: var(--mono);
  font-size: 9px;
  color: var(--border3);
  letter-spacing: 0.12em;
}
.topbar-left span { color: var(--c); }

.topbar-right { display:flex; align-items:center; gap:10px; }

/* â”€â”€â”€ TICKER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ticker {
  background: var(--bg3);
  border-bottom: 1px solid var(--border);
  height: 26px;
  display: flex;
  align-items: center;
  overflow: hidden;
}
.ticker-inner {
  font-family: var(--mono);
  font-size: 9px;
  white-space: nowrap;
  animation: tick 60s linear infinite;
  display: flex;
  gap: 60px;
  padding: 0 20px;
}
@keyframes tick { from{transform:translateX(100vw)} to{transform:translateX(-100%)} }
.t-ok { color: var(--ok); }
.t-warn { color: var(--warn); }
.t-crit { color: var(--crit); }
.t-c { color: var(--c); }
.t-pqc { color: var(--pqc); }

/* â”€â”€â”€ CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.content { padding: 24px; }

.section { display:none; }
.section.active {
  display:block;
  animation: sec-in 0.2s ease;
}
@keyframes sec-in {
  from { opacity:0; transform:translateY(6px); }
  to   { opacity:1; transform:translateY(0); }
}

/* â”€â”€â”€ TYPOGRAPHY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sec-head {
  display:flex; align-items:flex-start; justify-content:space-between;
  margin-bottom: 20px;
}
.sec-title {
  font-family: var(--head);
  font-size: 26px;
  font-weight: 800;
  color: var(--text3);
  letter-spacing: 0.02em;
  line-height: 1;
}
.sec-sub {
  font-family: var(--mono);
  font-size: 9px;
  color: var(--border3);
  margin-top: 5px;
  letter-spacing: 0.1em;
}

/* â”€â”€â”€ PILL / TAG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.pill {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 7px;
  border-radius: 2px;
  font-family: var(--mono);
  font-size: 8px;
  letter-spacing: 0.12em;
  font-weight: 500;
}
.pill-c    { background:var(--c-dim);    color:var(--c);    border:1px solid rgba(0,212,255,.2); }
.pill-ok   { background:var(--ok-dim);   color:var(--ok);   border:1px solid rgba(0,232,122,.2); }
.pill-warn { background:var(--warn-dim); color:var(--warn); border:1px solid rgba(255,184,0,.2); }
.pill-crit { background:var(--crit-dim); color:var(--crit); border:1px solid rgba(255,48,96,.2); }
.pill-pqc  { background:var(--pqc-dim);  color:var(--pqc);  border:1px solid rgba(176,96,255,.2); }

/* â”€â”€â”€ CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 3px;
  padding: 18px;
  position: relative;
  overflow: hidden;
}
.card::before {
  content:'';
  position:absolute;
  top:0; left:0; right:0; height:1px;
  background: linear-gradient(90deg, transparent, rgba(0,212,255,.1), transparent);
}
.card-title {
  font-family: var(--head);
  font-size: 14px;
  font-weight: 700;
  color: var(--text2);
  letter-spacing: 0.05em;
  margin-bottom: 12px;
}
.card-label {
  font-family: var(--mono);
  font-size: 8px;
  letter-spacing: 0.2em;
  color: var(--border3);
  text-transform: uppercase;
  margin-bottom: 8px;
}
.big-num {
  font-family: var(--mono);
  font-size: 36px;
  line-height: 1;
  font-weight: 300;
}

/* â”€â”€â”€ GRIDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.g4 { display:grid; grid-template-columns:repeat(4,1fr); gap:14px; margin-bottom:16px; }
.g3 { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-bottom:16px; }
.g2 { display:grid; grid-template-columns:repeat(2,1fr);  gap:14px; margin-bottom:16px; }
.g21 { display:grid; grid-template-columns:2fr 1fr;       gap:14px; margin-bottom:16px; }
.g12 { display:grid; grid-template-columns:1fr 2fr;       gap:14px; margin-bottom:16px; }

/* â”€â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.btn {
  display:inline-flex; align-items:center; gap:6px;
  padding: 7px 14px;
  border-radius: 2px;
  font-family: var(--mono);
  font-size: 9px;
  letter-spacing: 0.08em;
  cursor: pointer;
  border: none;
  transition: all 0.12s;
  font-weight: 500;
}
.btn-c    { background:var(--c);    color:var(--bg); }
.btn-c:hover { box-shadow: 0 0 20px rgba(0,212,255,.4); filter:brightness(1.1); }
.btn-ghost { background:transparent; color:var(--c); border:1px solid rgba(0,212,255,.3); }
.btn-ghost:hover { border-color:var(--c); box-shadow: var(--c-glow); }
.btn-crit { background:var(--crit-dim); color:var(--crit); border:1px solid rgba(255,48,96,.3); }
.btn-crit:hover { background:rgba(255,48,96,.2); }
.btn-pqc  { background:var(--pqc-dim); color:var(--pqc); border:1px solid rgba(176,96,255,.3); }
.btn-pqc:hover { background:rgba(176,96,255,.2); box-shadow:0 0 16px rgba(176,96,255,.3); }

/* â”€â”€â”€ SCORE RING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ring-wrap { position:relative; display:inline-block; }
.ring-center {
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
}
.ring-val { font-family:var(--mono); color:var(--c); text-shadow:0 0 12px rgba(0,212,255,.5); }

/* â”€â”€â”€ PROGRESS BARS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.prog { height:5px; background:var(--border); border-radius:3px; overflow:hidden; }
.prog-fill { height:100%; border-radius:3px; transition: width 1.2s cubic-bezier(0.4,0,0.2,1); }

/* â”€â”€â”€ AGENT CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.agent-card {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 3px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.15s;
}
.agent-card:hover { border-color: var(--border3); }
.agent-card.running  { border-color: rgba(0,232,122,.25); }
.agent-card.alert    { border-color: rgba(255,48,96,.35); }
.agent-card.thinking {
  border-color: rgba(0,212,255,.3);
  box-shadow: 0 0 18px rgba(0,212,255,.08);
}
.agent-card.pqc-active { border-color: rgba(176,96,255,.35); }

/* â”€â”€â”€ TERMINAL BLOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.terminal {
  background: #020405;
  border: 1px solid var(--border);
  border-radius: 3px;
  padding: 14px;
  font-family: var(--mono);
  font-size: 10px;
  line-height: 1.9;
  max-height: 240px;
  overflow-y: auto;
}
.t-ts  { color: var(--border3); }
.t-sys { color: var(--c); }
.t-ok2 { color: var(--ok); }
.t-w2  { color: var(--warn); }
.t-e   { color: var(--crit); }
.t-pq  { color: var(--pqc); }
.t-dim { color: var(--border3); }

/* â”€â”€â”€ CFI GRAPH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cfi-graph {
  background: #020405;
  border: 1px solid var(--border);
  border-radius: 3px;
  position: relative;
  overflow: hidden;
}
.cfi-canvas { display:block; width:100%; }

/* â”€â”€â”€ FLOW CANVAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.flow-canvas {
  background: #020405;
  border: 2px dashed var(--border2);
  border-radius: 4px;
  min-height: 320px;
  position: relative;
  overflow: hidden;
  cursor: crosshair;
}
.flow-canvas-label {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%,-50%);
  text-align:center;
  pointer-events:none;
}

.flow-block {
  position: absolute;
  border-radius: 3px;
  padding: 10px 14px;
  font-family: var(--mono);
  font-size: 10px;
  cursor: grab;
  user-select: none;
  border: 1px solid;
  min-width: 140px;
  text-align: center;
  transition: box-shadow 0.12s;
}
.flow-block:hover { box-shadow: 0 0 16px rgba(0,212,255,.2); z-index:10; }
.flow-block.event-block { background: rgba(0,212,255,.08); border-color: rgba(0,212,255,.4); color:var(--c); }
.flow-block.action-block { background: rgba(0,232,122,.08); border-color: rgba(0,232,122,.4); color:var(--ok); }
.flow-block.cond-block { background: rgba(255,184,0,.08); border-color: rgba(255,184,0,.4); color:var(--warn); }
.flow-block.end-block { background: rgba(176,96,255,.08); border-color: rgba(176,96,255,.4); color:var(--pqc); }

.flow-toolbar {
  display: flex;
  gap: 8px;
  padding: 12px;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 3px;
  margin-bottom: 10px;
  flex-wrap: wrap;
}
.flow-drag-block {
  padding: 6px 12px;
  border-radius: 2px;
  font-family: var(--mono);
  font-size: 9px;
  cursor: grab;
  border: 1px solid;
  transition: all 0.12s;
}
.flow-drag-block:hover { filter: brightness(1.2); }
.fdb-event  { background: rgba(0,212,255,.08);  border-color: rgba(0,212,255,.4);  color:var(--c); }
.fdb-action { background: rgba(0,232,122,.08);  border-color: rgba(0,232,122,.4);  color:var(--ok); }
.fdb-cond   { background: rgba(255,184,0,.08);  border-color: rgba(255,184,0,.4);  color:var(--warn); }
.fdb-end    { background: rgba(176,96,255,.08); border-color: rgba(176,96,255,.4); color:var(--pqc); }

/* â”€â”€â”€ SVG ARROWS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.flow-arrows { position:absolute; inset:0; pointer-events:none; overflow:visible; }

/* â”€â”€â”€ PQC METER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.pqc-meter {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: var(--pqc-dim);
  border: 1px solid rgba(176,96,255,.25);
  border-radius: 3px;
  margin-bottom: 14px;
}
.pqc-score {
  font-family: var(--mono);
  font-size: 42px;
  color: var(--pqc);
  text-shadow: 0 0 20px rgba(176,96,255,.5);
  font-weight: 300;
  min-width: 90px;
  text-align: center;
}
.pqc-label { font-family: var(--mono); font-size: 8px; letter-spacing: .15em; color: rgba(176,96,255,.5); }

/* â”€â”€â”€ HSM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hsm-diagram {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  padding: 20px;
  position: relative;
}
.hsm-box {
  border-radius: 4px;
  padding: 16px;
  text-align: center;
  min-width: 130px;
}
.hsm-omega { background: var(--c-dim); border: 1px solid rgba(0,212,255,.35); }
.hsm-wire  {
  width: 60px;
  height: 2px;
  background: repeating-linear-gradient(90deg, var(--c) 0, var(--c) 6px, transparent 6px, transparent 12px);
  position: relative;
  flex-shrink: 0;
}
.hsm-wire::after {
  content:'';
  position:absolute; right:-5px; top:-4px;
  border-left: 8px solid var(--c);
  border-top: 5px solid transparent;
  border-bottom: 5px solid transparent;
}
.hsm-client {
  background: rgba(0,232,122,.08);
  border: 2px solid rgba(0,232,122,.4);
  box-shadow: 0 0 20px rgba(0,232,122,.12);
}
.hsm-title { font-family:var(--head); font-size:13px; font-weight:700; margin-bottom:4px; }
.hsm-sub { font-family:var(--mono); font-size:8px; color:var(--border3); }

/* â”€â”€â”€ BLOCKCHAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.block-chain { display:flex; flex-direction:column; gap:0; }
.block-item {
  display:flex; gap:14px;
  padding: 12px 0;
  border-bottom: 1px solid rgba(20,30,43,.6);
  align-items: flex-start;
}
.block-num {
  width:44px; height:44px;
  border: 1px solid var(--border2);
  border-radius:3px;
  display:flex; align-items:center; justify-content:center;
  font-family:var(--mono); font-size:10px;
  color: var(--c);
  background: var(--bg3);
  flex-shrink:0;
}
.block-num.pqc-block { border-color: rgba(176,96,255,.4); color: var(--pqc); background: var(--pqc-dim); }
.block-body { flex:1; }
.block-hash { font-family:var(--mono); font-size:9px; color:var(--border3); margin-bottom:3px; word-break:break-all; }
.block-hash em { color:var(--c); font-style:normal; }
.block-event { font-size:12px; color:var(--text2); margin-bottom:2px; }
.block-meta { font-family:var(--mono); font-size:8px; color:var(--border3); }
.block-sig { font-family:var(--mono); font-size:8px; color:var(--pqc); }
.block-ok { color:var(--ok); font-size:9px; margin-left:auto; flex-shrink:0; font-family:var(--mono); }

/* â”€â”€â”€ TABLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tbl { width:100%; border-collapse:collapse; }
.tbl th { font-family:var(--mono); font-size:8px; letter-spacing:.15em; color:var(--border3); text-transform:uppercase; text-align:left; padding:6px 10px; border-bottom:1px solid var(--border); }
.tbl td { padding:9px 10px; border-bottom:1px solid rgba(20,30,43,.5); font-size:12px; color:var(--text); }
.tbl tr:hover td { background: rgba(255,255,255,.015); }

/* â”€â”€â”€ SCORE BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sb-row { margin-bottom:12px; }
.sb-head { display:flex; justify-content:space-between; margin-bottom:3px; font-size:12px; }
.sb-name { color:var(--text2); }
.sb-val  { font-family:var(--mono); font-size:10px; color:var(--border3); }

/* â”€â”€â”€ ALERT BANNER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.alert-b {
  display:flex; align-items:center; gap:10px;
  padding:9px 14px;
  border-radius:2px;
  font-size:12px;
  margin-bottom:16px;
  border: 1px solid;
}
.alert-crit { background:var(--crit-dim); border-color:rgba(255,48,96,.3); color:var(--crit); }
.alert-warn { background:var(--warn-dim); border-color:rgba(255,184,0,.3); color:var(--warn); }
.alert-pqc  { background:var(--pqc-dim); border-color:rgba(176,96,255,.3); color:var(--pqc); }
.alert-ok   { background:var(--ok-dim); border-color:rgba(0,232,122,.3); color:var(--ok); }

/* â”€â”€â”€ TOGGLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toggle-row { display:flex; align-items:center; justify-content:space-between; padding:12px 0; border-bottom:1px solid rgba(20,30,43,.6); }
.toggle-label { font-size:13px; color:var(--text2); }
.toggle-sub { font-family:var(--mono); font-size:9px; color:var(--border3); margin-top:2px; }
.toggle {
  width:40px; height:20px;
  background:var(--border2);
  border-radius:10px;
  cursor:pointer;
  position:relative;
  transition: background 0.2s;
  flex-shrink:0;
}
.toggle.on { background: var(--ok); }
.toggle.on-pqc { background: var(--pqc); }
.toggle::after {
  content:'';
  position:absolute;
  top:3px; left:3px;
  width:14px; height:14px;
  border-radius:50%;
  background:#fff;
  transition: transform 0.2s;
}
.toggle.on::after, .toggle.on-pqc::after { transform:translateX(20px); }

/* â”€â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-ov {
  position:fixed; inset:0;
  background:rgba(0,0,0,.75);
  z-index:900;
  display:none; align-items:center; justify-content:center;
  backdrop-filter:blur(6px);
}
.modal-ov.open { display:flex; }
.modal-box {
  background:var(--bg2);
  border:1px solid var(--border2);
  border-radius:4px;
  padding:26px;
  max-width:520px; width:90%;
  position:relative;
}
.modal-close { position:absolute; top:12px; right:14px; cursor:pointer; color:var(--border3); font-size:16px; }
.modal-title { font-family:var(--head); font-size:18px; font-weight:800; margin-bottom:6px; }

/* â”€â”€â”€ SCROLLBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
::-webkit-scrollbar { width:3px; height:3px; }
::-webkit-scrollbar-track { background:var(--bg); }
::-webkit-scrollbar-thumb { background:var(--border2); border-radius:2px; }

/* â”€â”€â”€ TOOLTIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tip-wrap { position:relative; display:inline-flex; align-items:center; }
.tip-wrap:hover .tip { opacity:1; pointer-events:auto; transform:translateY(0); }
.tip {
  position:absolute; bottom:calc(100% + 8px); left:50%;
  transform:translateX(-50%) translateY(4px);
  background:var(--bg3); border:1px solid var(--border2);
  padding:6px 10px; font-family:var(--mono); font-size:9px;
  color:var(--text); white-space:nowrap; border-radius:2px;
  opacity:0; pointer-events:none; transition:all 0.15s; z-index:500;
  font-style:italic;
}

/* â”€â”€â”€ OMEGA CONSTANT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.omega-const {
  position:fixed; bottom:10px; right:14px;
  font-family:var(--mono); font-size:8px;
  color:rgba(0,212,255,.07);
  letter-spacing:.2em; pointer-events:none; z-index:1000;
}

/* â”€â”€â”€ CFI ANOMALY FEED â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.anomaly-feed { max-height:280px; overflow-y:auto; }
.anom-item {
  display:flex; gap:10px; padding:9px 0;
  border-bottom:1px solid rgba(20,30,43,.6);
  font-family:var(--mono); font-size:9px;
  align-items:flex-start;
}
.anom-time { color:var(--border3); flex-shrink:0; width:55px; }
.anom-type { flex-shrink:0; }
.anom-body { flex:1; color:var(--text2); }
.anom-src { color:var(--border3); }

/* â”€â”€â”€ QUANTUM ORBIT ANIMATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.q-orbit {
  width:80px; height:80px;
  border-radius:50%;
  border:1px solid rgba(176,96,255,.2);
  position:relative;
  display:flex; align-items:center; justify-content:center;
  animation: orbit-spin 8s linear infinite;
}
@keyframes orbit-spin { to{transform:rotate(360deg)} }
.q-orbit::before {
  content:'';
  position:absolute;
  top:-3px; left:calc(50% - 3px);
  width:6px; height:6px;
  border-radius:50%;
  background:var(--pqc);
  box-shadow:0 0 8px var(--pqc);
}
.q-center { animation: orbit-spin 8s linear reverse infinite; font-size:24px; }

/* â”€â”€â”€ AGENT TASK INPUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.task-input {
  background:var(--bg3);
  border:1px solid var(--border);
  border-radius:3px;
  padding:9px 12px;
  font-family:var(--mono);
  font-size:10px;
  color:var(--text2);
  outline:none;
  transition:border-color .15s;
  width:100%;
}
.task-input:focus { border-color:var(--c); }

/* â”€â”€â”€ CHAIN CONNECTOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.chain-connector {
  text-align:center;
  font-family:var(--mono);
  font-size:8px;
  color:var(--border3);
  padding:3px;
}

/* â”€â”€â”€ HSM STATUS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hsm-key-status {
  display:flex; align-items:center; gap:8px;
  padding:10px 14px;
  background:var(--bg3); border:1px solid var(--border); border-radius:3px;
  font-family:var(--mono); font-size:10px;
  margin-top:8px;
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â• -->
<aside class="sidebar">
  <div class="logo-block">
    <div class="logo-v2">âŒ¬ OMEGA <span class="logo-q">Q-SAFE</span></div>
    <div class="logo-sub">v2.0 Â· build 1310 Â· RESEARCH EDITION</div>
  </div>

  <nav>
    <div class="nav-group">Core</div>
    <div class="nav-item active" onclick="nav(this,'s-dash')"><span class="nav-icon">â—ˆ</span>Dashboard<span class="nav-badge warn">3!</span></div>
    <div class="nav-item" onclick="nav(this,'s-norm')"><span class="nav-icon">âŠ</span>Normativas</div>
    <div class="nav-item" onclick="nav(this,'s-sec')"><span class="nav-icon">â—‰</span>Seguridad</div>
    <div class="nav-item" onclick="nav(this,'s-chain')"><span class="nav-icon">â¬¡</span>Blockchain</div>

    <div class="nav-group">v2 Â· Frontier</div>
    <div class="nav-item" onclick="nav(this,'s-agents')"><span class="nav-icon">â—‡</span>Orquestador IA<span class="nav-badge new">IA-1</span></div>
    <div class="nav-item" onclick="nav(this,'s-cfi')"><span class="nav-icon">âŸ¨âŸ©</span>Control Flow CFI<span class="nav-badge new">CFI-1</span></div>
    <div class="nav-item" onclick="nav(this,'s-pqc')"><span class="nav-icon">Î¨</span>Post-Quantum PQC<span class="nav-badge new">PQC-1</span></div>
    <div class="nav-item" onclick="nav(this,'s-hsm')"><span class="nav-icon">â¬›</span>HSM SoberanÃ­a<span class="nav-badge new">HSM-1</span></div>
    <div class="nav-item" onclick="nav(this,'s-lowcode')"><span class="nav-icon">â–£</span>Low-Code KYC/AML<span class="nav-badge new">UI-1</span></div>

    <div class="nav-group">Enterprise</div>
    <div class="nav-item" onclick="nav(this,'s-aela')"><span class="nav-icon">â—ˆ</span>Modelo AELA</div>
  </nav>

  <div class="sidebar-footer">
    <div><span class="pulse-dot"></span>Sistema operativo</div>
    <div>Atlas Medicus v2.4 Â· kernel</div>
    <div style="margin-top:4px;color:rgba(176,96,255,.4)">PQC: CRYSTALS-Dilithium3</div>
    <div style="color:rgba(0,232,122,.3)">HSM: THALES Luna 7 Â· linked</div>
  </div>
</aside>

<!-- â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â• -->
<main class="main">

  <div class="topbar">
    <div class="topbar-left">
      OMEGA Q-SAFE Â· <span>BANCA DEL SUR S.A.</span> Â· SesiÃ³n admin Â· <span id="clock"></span>
    </div>
    <div class="topbar-right">
      <span class="pill pill-pqc">Î¨ PQC ACTIVO</span>
      <span class="pill pill-ok">HSM SOBERANO</span>
      <span class="pill pill-warn">âš  3 alertas CFI</span>
      <span class="pill pill-c">247 endpoints</span>
    </div>
  </div>

  <div class="ticker">
    <div class="ticker-inner">
      <span class="t-pqc">Î¨ CRYSTALS-Dilithium3 firma bloque #1310</span>
      <span class="t-ok">âœ“ Agente RGPD completÃ³ audit #4722 â€” 0 hallazgos crÃ­ticos</span>
      <span class="t-c">CFI-1 aprendiendo flujo: API_PAYMENTS â€” 96.4% baseline estable</span>
      <span class="t-warn">âš  CFI-1: secuencia ANÃ“MALA bloqueada Â· endpoint LEGACY-COBOL-01</span>
      <span class="t-pqc">Î¨ HSM Thales Luna 7 â€” key vault online Â· 0 exportaciones</span>
      <span class="t-ok">âœ“ Agente DORA generÃ³ plan remediaciÃ³n Â· 3 tareas orquestadas</span>
      <span class="t-c">PQC Madurez: 73% â†’ target 100% en Q3-2026</span>
      <span class="t-crit">âœ— CFI-1 ANOMALÃA CRÃTICA: LEGACY-COBOL-01 â†’ PAYMENTS-CORE Â· BLOQUEADO</span>
      <span class="t-ok">âœ“ Bloque #1310 verificado Â· SHA3-512 + Dilithium3 Â· Ã­ntegro</span>
    </div>
  </div>

  <div class="content">

    <!-- â•â•â•â•â•â•â•â•â•â• DASHBOARD â•â•â•â•â•â•â•â•â•â• -->
    <section class="section active" id="s-dash">
      <div class="sec-head">
        <div>
          <div class="sec-title">DASHBOARD EJECUTIVO</div>
          <div class="sec-sub">BANCA DEL SUR S.A. Â· Q-SAFE v2.0 Â· Postura global Â· Ãºltima actualizaciÃ³n hace 18s</div>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-ghost">â†“ Informe Q-SAFE</button>
          <div class="tip-wrap">
            <button class="btn btn-c">âŸ³ Rescan Completo</button>
            <div class="tip">Un rescan completo con agentes autÃ³nomos. Perfecto para un lunes por la maÃ±ana.</div>
          </div>
        </div>
      </div>

      <div class="alert-b alert-pqc">
        <span>Î¨</span><span><strong>Q-DAY PREPARACIÃ“N:</strong> 4 sistemas crÃ­ticos aÃºn con firma ECDSA clÃ¡sica. El wrapper PQC estÃ¡ disponible â€” actÃ­valo antes de que IBM Eagle II sea news.</span>
      </div>
      <div class="alert-b alert-crit" style="margin-bottom:16px">
        <span>â›”</span><span><strong>CFI-1 BLOQUEÃ“:</strong> LEGACY-COBOL-01 intentÃ³ llamar a PAYMENTS-CORE con secuencia fuera de whitelist. Ataque lateral detenido hace 4 minutos.</span>
      </div>

      <div class="g4">
        <div class="card">
          <div class="card-label">Postura Q-SAFE Global</div>
          <div style="display:flex;align-items:center;gap:14px;margin-top:4px">
            <div class="ring-wrap">
              <svg width="80" height="80" style="transform:rotate(-90deg)">
                <circle cx="40" cy="40" r="32" fill="none" stroke="var(--border)" stroke-width="7"/>
                <circle cx="40" cy="40" r="32" fill="none" stroke="var(--c)" stroke-width="7"
                  stroke-linecap="round"
                  stroke-dasharray="201"
                  stroke-dashoffset="39"
                  style="filter:drop-shadow(0 0 6px rgba(0,212,255,.5))"/>
              </svg>
              <div class="ring-center">
                <div class="ring-val" style="font-size:18px">81%</div>
                <div style="font-family:var(--mono);font-size:7px;color:var(--border3)">GLOBAL</div>
              </div>
            </div>
            <div>
              <div style="font-size:11px;color:var(--ok);margin-bottom:3px">â†‘ +4pts vs v1.0</div>
              <div style="font-family:var(--mono);font-size:8px;color:var(--border3)">PQC: 73%</div>
              <div style="font-family:var(--mono);font-size:8px;color:var(--border3)">CFI: ENFORCE</div>
              <div style="font-family:var(--mono);font-size:8px;color:var(--ok)">HSM: SOBERANO</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-label">Agentes AutÃ³nomos</div>
          <div class="big-num" style="color:var(--c)">7</div>
          <div style="font-size:11px;color:var(--ok);margin-top:4px">5 running Â· 1 thinking Â· 1 alertando</div>
          <div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:4px">90.3% tareas sin intervenciÃ³n humana</div>
        </div>

        <div class="card">
          <div class="card-label">CFI AnomalÃ­as (24h)</div>
          <div class="big-num" style="color:var(--crit)">3</div>
          <div style="font-size:11px;color:var(--crit);margin-top:4px">1 bloqueada Â· 2 en anÃ¡lisis</div>
          <div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:4px">Whitelist: 4.847 flujos vÃ¡lidos</div>
        </div>

        <div class="card">
          <div class="card-label">Bloque PQC</div>
          <div class="big-num" style="color:var(--pqc);font-size:26px;margin-top:4px">#1310</div>
          <div style="font-family:var(--mono);font-size:8px;color:var(--pqc);margin-top:6px">Î¨ Dilithium3 Â· vÃ¡lido</div>
          <div style="font-family:var(--mono);font-size:8px;color:var(--border3)">HSM-firmado Â· soberano</div>
        </div>
      </div>

      <div class="g21">
        <div class="card">
          <div class="card-title">Postura por Normativa</div>
          <div style="margin-top:4px">
            <div class="sb-row"><div class="sb-head"><span class="sb-name">RGPD</span><span class="sb-val" style="color:var(--ok)">94%</span></div><div class="prog"><div class="prog-fill" style="width:94%;background:var(--ok)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">ISO 27001</span><span class="sb-val" style="color:var(--ok)">91%</span></div><div class="prog"><div class="prog-fill" style="width:91%;background:var(--ok)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">PCI DSS v4</span><span class="sb-val" style="color:var(--c)">88%</span></div><div class="prog"><div class="prog-fill" style="width:88%;background:var(--c)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">NIS2</span><span class="sb-val" style="color:var(--c)">83%</span></div><div class="prog"><div class="prog-fill" style="width:83%;background:var(--c)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">DORA</span><span class="sb-val" style="color:var(--warn)">71%</span></div><div class="prog"><div class="prog-fill" style="width:71%;background:var(--warn)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">FATF / AMLD</span><span class="sb-val" style="color:var(--c)">79%</span></div><div class="prog"><div class="prog-fill" style="width:79%;background:var(--c)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">CMMC 2.0</span><span class="sb-val" style="color:var(--warn)">68%</span></div><div class="prog"><div class="prog-fill" style="width:68%;background:var(--warn)"></div></div></div>
          </div>
        </div>

        <div style="display:flex;flex-direction:column;gap:14px">
          <div class="card">
            <div class="card-title">CategorÃ­as Q-SAFE</div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">Seguridad</span><span class="sb-val" style="color:var(--ok)">88%</span></div><div class="prog"><div class="prog-fill" style="width:88%;background:var(--ok)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">Cumplimiento</span><span class="sb-val" style="color:var(--c)">84%</span></div><div class="prog"><div class="prog-fill" style="width:84%;background:var(--c)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">Riesgos</span><span class="sb-val" style="color:var(--warn)">76%</span></div><div class="prog"><div class="prog-fill" style="width:76%;background:var(--warn)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">Trazabilidad</span><span class="sb-val" style="color:var(--ok)">99%</span></div><div class="prog"><div class="prog-fill" style="width:99%;background:var(--ok)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">PQC Madurez</span><span class="sb-val" style="color:var(--pqc)">73%</span></div><div class="prog"><div class="prog-fill" style="width:73%;background:var(--pqc)"></div></div></div>
            <div class="sb-row"><div class="sb-head"><span class="sb-name">CFI Coverage</span><span class="sb-val" style="color:var(--c)">91%</span></div><div class="prog"><div class="prog-fill" style="width:91%;background:var(--c)"></div></div></div>
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â• NORMATIVAS â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="s-norm">
      <div class="sec-head">
        <div><div class="sec-title">NORMATIVAS</div><div class="sec-sub">12 frameworks activos Â· Checklists automÃ¡ticos Â· Agentes orquestados Â· Low-Code disponible</div></div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-ghost" onclick="nav(document.querySelector('[onclick*=s-lowcode]'),'s-lowcode')">â–£ DiseÃ±ar Flujo KYC</button>
          <button class="btn btn-c" onclick="alert('Informe consolidado generado.\n\nHash PQC (Dilithium3): 3f9a2b1c...\nBloque blockchain: #1311\nFirmado por HSM Thales Luna 7\n\nFormato: PDF + JSON con firma cuÃ¡ntica.')">ğŸ“„ Informe Consolidado</button>
        </div>
      </div>
      <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:18px">
        <div class="card" style="cursor:pointer;text-align:center;border-color:rgba(0,212,255,.3)">
          <div style="font-family:var(--mono);font-size:11px;color:var(--text2)">RGPD</div>
          <div style="font-family:var(--mono);font-size:24px;color:var(--ok);margin:6px 0">94%</div>
          <span class="pill pill-ok">COMPLIANT</span>
        </div>
        <div class="card" style="cursor:pointer;text-align:center">
          <div style="font-family:var(--mono);font-size:11px;color:var(--text2)">NIS2</div>
          <div style="font-family:var(--mono);font-size:24px;color:var(--c);margin:6px 0">83%</div>
          <span class="pill pill-c">REVIEW</span>
        </div>
        <div class="card" style="cursor:pointer;text-align:center;border-color:rgba(255,184,0,.25)">
          <div style="font-family:var(--mono);font-size:11px;color:var(--text2)">DORA</div>
          <div style="font-family:var(--mono);font-size:24px;color:var(--warn);margin:6px 0">71%</div>
          <span class="pill pill-warn">GAP</span>
        </div>
        <div class="card" style="cursor:pointer;text-align:center">
          <div style="font-family:var(--mono);font-size:11px;color:var(--text2)">PCI DSS v4</div>
          <div style="font-family:var(--mono);font-size:24px;color:var(--ok);margin:6px 0">88%</div>
          <span class="pill pill-ok">COMPLIANT</span>
        </div>
        <div class="card" style="cursor:pointer;text-align:center">
          <div style="font-family:var(--mono);font-size:11px;color:var(--text2)">ISO 27001</div>
          <div style="font-family:var(--mono);font-size:24px;color:var(--ok);margin:6px 0">91%</div>
          <span class="pill pill-ok">COMPLIANT</span>
        </div>
        <div class="card" style="cursor:pointer;text-align:center">
          <div style="font-family:var(--mono);font-size:11px;color:var(--text2)">HIPAA</div>
          <div style="font-family:var(--mono);font-size:24px;color:var(--ok);margin:6px 0">89%</div>
          <span class="pill pill-ok">COMPLIANT</span>
        </div>
        <div class="card" style="cursor:pointer;text-align:center;border-color:rgba(255,184,0,.25)">
          <div style="font-family:var(--mono);font-size:11px;color:var(--text2)">CMMC 2.0</div>
          <div style="font-family:var(--mono);font-size:24px;color:var(--warn);margin:6px 0">68%</div>
          <span class="pill pill-warn">GAP</span>
        </div>
        <div class="card" style="cursor:pointer;text-align:center">
          <div style="font-family:var(--mono);font-size:11px;color:var(--text2)">SOC 2 T2</div>
          <div style="font-family:var(--mono);font-size:24px;color:var(--c);margin:6px 0">86%</div>
          <span class="pill pill-c">REVIEW</span>
        </div>
      </div>
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px">
          <div class="card-title" style="margin:0">RGPD â€” Checklist Activo</div>
          <div style="display:flex;gap:8px">
            <button class="btn btn-ghost" onclick="alert('Agente RGPD lanzado.\n\nTarea asignada: Auditar acceso a datos personales â€” Ãºltimos 30 dÃ­as.\nEstado: PLANIFICANDO...\n\nVer Orquestador IA â†’ Agente RGPD-01.')">âŸ³ Auditar con Agente</button>
            <button class="btn btn-c" onclick="alert('Informe RGPD generado.\nFirmado con Dilithium3 Â· #bloque 1311\nHash: a3f9c2b1d...')">ğŸ“„ Generar Informe</button>
          </div>
        </div>
        <div>
          <div style="display:flex;align-items:flex-start;gap:10px;padding:10px 0;border-bottom:1px solid rgba(20,30,43,.5)">
            <span style="color:var(--ok);width:16px;flex-shrink:0">âœ“</span>
            <div style="flex:1"><div style="font-size:12px;color:var(--text2)">Registro de actividades de tratamiento (Art. 30)</div><div style="font-family:var(--mono);font-size:9px;color:var(--border3)">Evidencia: registro_tratamiento_v14.json Â· #bloque 1298 Â· Dilithium3 âœ“</div></div>
            <span class="pill pill-ok">PASS</span>
          </div>
          <div style="display:flex;align-items:flex-start;gap:10px;padding:10px 0;border-bottom:1px solid rgba(20,30,43,.5)">
            <span style="color:var(--warn);width:16px;flex-shrink:0">âš </span>
            <div style="flex:1"><div style="font-size:12px;color:var(--text2)">EIPD para tratamientos de alto riesgo</div><div style="font-family:var(--mono);font-size:9px;color:var(--border3)">Pendiente: CRM-v3, AnalyticsHub Â· Agente RGPD programÃ³ revisiÃ³n para 28/02</div></div>
            <span class="pill pill-warn">WARN</span>
          </div>
          <div style="display:flex;align-items:flex-start;gap:10px;padding:10px 0;border-bottom:1px solid rgba(20,30,43,.5)">
            <span style="color:var(--crit);width:16px;flex-shrink:0">âœ—</span>
            <div style="flex:1"><div style="font-size:12px;color:var(--text2)">Transferencias internacionales (Art. 46) â€” SCCs AWS</div><div style="font-family:var(--mono);font-size:9px;color:var(--crit)">Agente RGPD: iniciando flujo de trabajo â†’ contactando Legal el 24/02/2026</div></div>
            <span class="pill pill-crit">FAIL</span>
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â• SEGURIDAD â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="s-sec">
      <div class="sec-head">
        <div><div class="sec-title">SEGURIDAD</div><div class="sec-sub">247 endpoints Â· CFI integrado Â· Aislamiento dinÃ¡mico de riesgos</div></div>
        <div style="display:flex;gap:8px">
          <div class="tip-wrap">
            <button class="btn btn-crit" onclick="openSimModal()">ğŸ’€ Simular Ataque</button>
            <div class="tip">CFI-1 lo habrÃ­a detenido. Spoiler: el COBOL no sobrevive.</div>
          </div>
        </div>
      </div>
      <div class="g4">
        <div class="card"><div class="card-label">Cifrado en reposo</div><div class="big-num" style="color:var(--ok)">96%</div><div style="font-size:11px;color:var(--border3);margin-top:4px">238 / 247 endpoints</div></div>
        <div class="card"><div class="card-label">MFA Habilitado</div><div class="big-num" style="color:var(--warn)">89%</div><div style="font-size:11px;color:var(--warn);margin-top:4px">27 usuarios sin MFA</div></div>
        <div class="card"><div class="card-label">CFI AnomalÃ­as</div><div class="big-num" style="color:var(--crit)">3</div><div style="font-size:11px;color:var(--crit);margin-top:4px">1 bloqueada Â· 2 monitorizando</div></div>
        <div class="card"><div class="card-label">Aislados dinÃ¡micamente</div><div class="big-num" style="color:var(--c)">1</div><div style="font-size:11px;color:var(--c);margin-top:4px">LEGACY-COBOL-01</div></div>
      </div>
      <div class="card">
        <div class="card-title">Inventario de Endpoints</div>
        <table class="tbl" style="margin-top:8px">
          <thead><tr><th>Hostname</th><th>IP</th><th>Cifrado</th><th>MFA</th><th>CFI</th><th>Estado</th></tr></thead>
          <tbody>
            <tr><td style="color:var(--text2)">SRV-DB-PROD-01</td><td style="font-family:var(--mono);font-size:10px;color:var(--border3)">10.0.1.10</td><td><span class="pill pill-ok">AES-256</span></td><td><span style="color:var(--ok)">âœ“</span></td><td><span class="pill pill-ok">ENFORCE</span></td><td><span class="pill pill-ok">SEGURO</span></td></tr>
            <tr><td style="color:var(--text2)">DESKTOP-7A3F</td><td style="font-family:var(--mono);font-size:10px;color:var(--border3)">192.168.4.77</td><td><span class="pill pill-ok">BitLocker</span></td><td><span style="color:var(--crit)">âœ—</span></td><td><span class="pill pill-c">APRENDIENDO</span></td><td><span class="pill pill-warn">RIESGO</span></td></tr>
            <tr style="background:rgba(255,48,96,.04)"><td style="color:var(--crit)">LEGACY-COBOL-01</td><td style="font-family:var(--mono);font-size:10px;color:var(--border3)">10.0.9.3</td><td><span class="pill pill-crit">SIN CIFRAR</span></td><td><span style="color:var(--crit)">âœ—</span></td><td><span class="pill pill-crit">BLOQUEADO</span></td><td><span class="pill pill-crit">AISLADO</span></td></tr>
            <tr><td style="color:var(--text2)">APP-CORE-02</td><td style="font-family:var(--mono);font-size:10px;color:var(--border3)">10.0.2.14</td><td><span class="pill pill-ok">AES-256</span></td><td><span style="color:var(--ok)">âœ“</span></td><td><span class="pill pill-ok">ENFORCE</span></td><td><span class="pill pill-ok">SEGURO</span></td></tr>
            <tr><td style="color:var(--text2)">PAYMENTS-CORE</td><td style="font-family:var(--mono);font-size:10px;color:var(--border3)">10.0.1.50</td><td><span class="pill pill-ok">AES-256</span></td><td><span style="color:var(--ok)">âœ“</span></td><td><span class="pill pill-ok">ENFORCE</span></td><td><span class="pill pill-c">MONIT.</span></td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â• BLOCKCHAIN â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="s-chain">
      <div class="sec-head">
        <div><div class="sec-title">BLOCKCHAIN</div><div class="sec-sub">Registro inmutable Â· 1310 bloques Â· PQC: Dilithium3 Â· HSM-firmado Â· Verificable por reguladores</div></div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-ghost" onclick="alert('URL verificaciÃ³n pÃºblica:\nhttps://verify.omega-qsafe.io/chain/banca-del-sur/1310\n\nFirma Dilithium3 verificable offline.\nToken regulatorio: REG-AEPD-4721-2026')">ğŸ”— Compartir con Regulador</button>
          <button class="btn btn-c">âŸ³ Verificar Integridad</button>
        </div>
      </div>
      <div class="g3" style="margin-bottom:16px">
        <div class="card"><div class="card-label">Bloques totales</div><div class="big-num" style="color:var(--c)">1.310</div><div style="font-family:var(--mono);font-size:8px;color:var(--ok);margin-top:6px">âœ“ Cadena Ã­ntegra Â· 0 alteraciones</div></div>
        <div class="card"><div class="card-label">Algoritmo firma</div><div style="font-family:var(--mono);font-size:16px;color:var(--pqc);margin-top:6px">CRYSTALS</div><div style="font-family:var(--mono);font-size:10px;color:var(--pqc);margin-top:2px">Dilithium3 Â· NIST Level 3</div><div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:4px">fallback: ECDSA P-256</div></div>
        <div class="card"><div class="card-label">Custodia claves</div><div style="font-family:var(--mono);font-size:14px;color:var(--ok);margin-top:6px">THALES LUNA 7</div><div style="font-family:var(--mono);font-size:8px;color:var(--ok);margin-top:4px">HSM on-premise cliente</div><div style="font-family:var(--mono);font-size:8px;color:var(--border3)">OMEGA nunca toca la clave</div></div>
      </div>
      <div class="card">
        <div class="card-title">Cadena â€” Ãšltimos Bloques</div>
        <div class="block-chain" style="margin-top:8px">
          <div class="block-item">
            <div class="block-num pqc-block">Î¨1310</div>
            <div class="block-body">
              <div class="block-hash">Hash: <em>00000a3f8c9d2e1b4f72a91c6d84e3b2f1a0c9d8e7b6</em>... (SHA3-512)</div>
              <div class="block-event">ğŸ¤– AGENTE RGPD-01: Audit #4722 completado â€” 0 hallazgos crÃ­ticos. Tarea cerrada autÃ³nomamente.</div>
              <div class="block-meta">14:41:03 UTC Â· Orquestador IA</div>
              <div class="block-sig">Î¨ Firma: Dilithium3 Â· HSM Thales Luna 7 Â· verificada</div>
            </div>
            <div class="block-ok">âœ“ ÃNTEGRO</div>
          </div>
          <div class="chain-connector">â””â”€â”€ prev hash verified</div>
          <div class="block-item">
            <div class="block-num pqc-block">Î¨1309</div>
            <div class="block-body">
              <div class="block-hash">Hash: <em>00000b4c9e1a3f72d8c6b4e2a1f9d8c7b6a5e4d3</em>...</div>
              <div class="block-event">â›” CFI-1: ANOMALÃA CRÃTICA bloqueada â€” LEGACY-COBOL-01â†’PAYMENTS-CORE Â· secuencia fuera de whitelist</div>
              <div class="block-meta">14:37:19 UTC Â· CFI Monitor</div>
              <div class="block-sig">Î¨ Firma: Dilithium3 Â· HSM Thales Luna 7 Â· verificada</div>
            </div>
            <div class="block-ok">âœ“ ÃNTEGRO</div>
          </div>
          <div class="chain-connector">â””â”€â”€ prev hash verified</div>
          <div class="block-item">
            <div class="block-num">1308</div>
            <div class="block-body">
              <div class="block-hash">Hash: <em>00000c5d0f2b4e81a9c7d5f3b1e9c7b5d3f1</em>... (SHA-256 legacy)</div>
              <div class="block-event">ğŸ“Š Informe DORA generado Â· 71% compliant Â· plan remediaciÃ³n orquestado por Agente DORA-01</div>
              <div class="block-meta">14:12:09 UTC Â· Solicitud manual</div>
              <div class="block-sig" style="color:var(--border3)">Firma: ECDSA P-256 (legacy â€” migraciÃ³n PQC pendiente)</div>
            </div>
            <div class="block-ok">âœ“ ÃNTEGRO</div>
          </div>
          <div class="chain-connector">â””â”€â”€ prev hash verified</div>
          <div class="block-item">
            <div class="block-num pqc-block">Î¨1307</div>
            <div class="block-body">
              <div class="block-hash">Hash: <em>00000d6e1a3c5f7b9d1f3a5c7e9b1d3f5a7c9e1b</em>...</div>
              <div class="block-event">ğŸ”‘ HSM-1: rotaciÃ³n de claves maestras completada Â· THALES LUNA 7 Â· clave nunca exportada</div>
              <div class="block-meta">13:00:00 UTC Â· Tarea programada HSM-1</div>
              <div class="block-sig">Î¨ Firma: Dilithium3 Â· HSM Thales Luna 7 Â· verificada</div>
            </div>
            <div class="block-ok">âœ“ ÃNTEGRO</div>
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â• IA-1: ORQUESTADOR â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="s-agents">
      <div class="sec-head">
        <div>
          <div class="sec-title">ORQUESTADOR DE AGENTES IA <span class="pill pill-pqc" style="vertical-align:middle;margin-left:8px">IA-1</span></div>
          <div class="sec-sub">Agentes autÃ³nomos Â· bucle booleano tarea-completada Â· logs en blockchain Â· 90.3% sin intervenciÃ³n humana</div>
        </div>
        <button class="btn btn-c" onclick="openNewAgentModal()">+ Nuevo Agente</button>
      </div>

      <div class="alert-b alert-ok" style="margin-bottom:16px">
        <span>ğŸ¤–</span><span><strong>Agente RGPD-01</strong> completÃ³ la tarea "Auditar acceso datos personales 30 dÃ­as" de forma autÃ³noma. Evidencia registrada en bloque #1310. <em>0 intervenciones humanas requeridas.</em></span>
      </div>

      <div class="g3">

        <!-- AGENT RGPD -->
        <div class="agent-card running">
          <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px">
            <div>
              <div style="font-family:var(--head);font-size:15px;font-weight:700;color:var(--text2)">OMEGA-RGPD-01</div>
              <div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:2px">Normativas: RGPD Â· LOPD-GDD</div>
            </div>
            <span class="pill pill-ok">â— ACTIVO</span>
          </div>

          <div style="background:var(--bg4);border:1px solid var(--border);border-radius:2px;padding:10px;margin-bottom:10px">
            <div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-bottom:4px">TAREA ACTIVA</div>
            <div style="font-size:11px;color:var(--text2)">"Auditar acceso a datos personales de los Ãºltimos 30 dÃ­as"</div>
            <div style="display:flex;align-items:center;gap:8px;margin-top:8px">
              <div style="flex:1;height:3px;background:var(--border);border-radius:2px"><div style="width:100%;height:100%;background:var(--ok);border-radius:2px"></div></div>
              <span style="font-family:var(--mono);font-size:8px;color:var(--ok)">COMPLETADA</span>
            </div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px">
            <div><div style="font-family:var(--mono);font-size:7px;color:var(--border3);letter-spacing:.15em">PASOS EJECUTADOS</div><div style="font-family:var(--mono);font-size:18px;color:var(--ok)">7/7</div></div>
            <div><div style="font-family:var(--mono);font-size:7px;color:var(--border3);letter-spacing:.15em">INTERVENCIÃ“N HUMANA</div><div style="font-family:var(--mono);font-size:18px;color:var(--ok)">0</div></div>
          </div>

          <div class="terminal" style="max-height:130px">
            <div><span class="t-ts">14:41 </span><span class="t-ok2">âœ“ TAREA COMPLETADA Â· bloque #1310</span></div>
            <div><span class="t-ts">14:39 </span><span class="t-sys">â†’ Generando evidencias RGPD Art.30</span></div>
            <div><span class="t-ts">14:36 </span><span class="t-ok2">âœ“ 847 accesos analizados Â· 0 anÃ³malos</span></div>
            <div><span class="t-ts">14:31 </span><span class="t-w2">âš  EIPD pendiente CRM-v3 Â· creando ticket</span></div>
            <div><span class="t-ts">14:20 </span><span class="t-sys">â†’ Consultando logs de acceso BD</span></div>
            <div><span class="t-ts">14:18 </span><span class="t-sys">â†’ Planificando 7 pasos de auditorÃ­a</span></div>
            <div><span class="t-ts">14:18 </span><span class="t-sys">INICIO: "Auditar acceso datos personales 30d"</span></div>
          </div>
        </div>

        <!-- AGENT DORA -->
        <div class="agent-card thinking">
          <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px">
            <div>
              <div style="font-family:var(--head);font-size:15px;font-weight:700;color:var(--text2)">OMEGA-DORA-01</div>
              <div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:2px">Normativas: DORA Â· NIS2</div>
            </div>
            <span class="pill pill-c">âŸ³ PENSANDO</span>
          </div>

          <div style="background:var(--bg4);border:1px solid var(--border);border-radius:2px;padding:10px;margin-bottom:10px">
            <div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-bottom:4px">TAREA ACTIVA</div>
            <div style="font-size:11px;color:var(--text2)">"Crear plan de continuidad para PAYMENTS-CORE. Incluir RTO/RPO y notificar a DORA-responsable."</div>
            <div style="display:flex;align-items:center;gap:8px;margin-top:8px">
              <div style="flex:1;height:3px;background:var(--border);border-radius:2px"><div style="width:43%;height:100%;background:var(--c);border-radius:2px;animation:prog-anim 2s ease-in-out infinite alternate"></div></div>
              <span style="font-family:var(--mono);font-size:8px;color:var(--c)">3/7 pasos</span>
            </div>
          </div>
          <style>@keyframes prog-anim{from{opacity:.5}to{opacity:1}}</style>

          <div style="margin-bottom:10px">
            <input class="task-input" placeholder="Asignar nueva tarea de alto nivel..." id="doraTask"/>
            <div style="display:flex;gap:6px;margin-top:6px">
              <button class="btn btn-c" style="flex:1;justify-content:center" onclick="assignTask('doraTask')">âŸ³ Asignar Tarea</button>
              <button class="btn btn-ghost" onclick="alert('Pausando agente DORA-01...\nEstado: PAUSED Â· tarea en memoria.')">â¸ Pausar</button>
            </div>
          </div>

          <div class="terminal" style="max-height:100px">
            <div><span class="t-ts">14:40 </span><span class="t-sys">â†’ Analizando dependencias PAYMENTS-CORE</span></div>
            <div><span class="t-ts">14:38 </span><span class="t-ok2">âœ“ RTO actual: 8h â€” DORA requiere: 4h</span></div>
            <div><span class="t-ts">14:35 </span><span class="t-sys">â†’ Buscando responsable DORA en directorio</span></div>
            <div><span class="t-ts">14:33 </span><span class="t-sys">INICIO: "Crear plan continuidad PAYMENTS-CORE"</span></div>
          </div>
        </div>

        <!-- AGENT SENTINEL (CFI+SEC) -->
        <div class="agent-card alert">
          <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px">
            <div>
              <div style="font-family:var(--head);font-size:15px;font-weight:700;color:var(--text2)">OMEGA-SENTINEL</div>
              <div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:2px">CFI-1 + Seguridad Â· Tiempo real</div>
            </div>
            <span class="pill pill-crit">âš  ALERTA</span>
          </div>

          <div style="background:rgba(255,48,96,.06);border:1px solid rgba(255,48,96,.25);border-radius:2px;padding:10px;margin-bottom:10px">
            <div style="font-family:var(--mono);font-size:8px;color:var(--crit);margin-bottom:4px">INCIDENTE ACTIVO</div>
            <div style="font-size:11px;color:var(--text2)">LEGACY-COBOL-01 intentÃ³ flujo de control no autorizado â†’ aislado automÃ¡ticamente</div>
            <div style="font-family:var(--mono);font-size:9px;color:var(--crit);margin-top:6px">BOOLEANO: Â¿Flujo en whitelist? NO â†’ BLOQUEAR</div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px">
            <div><div style="font-family:var(--mono);font-size:7px;color:var(--border3);letter-spacing:.15em">BLOQUEADOS HOY</div><div style="font-family:var(--mono);font-size:18px;color:var(--crit)">3</div></div>
            <div><div style="font-family:var(--mono);font-size:7px;color:var(--border3);letter-spacing:.15em">AISLADOS</div><div style="font-family:var(--mono);font-size:18px;color:var(--warn)">1</div></div>
          </div>

          <div class="terminal" style="max-height:100px">
            <div><span class="t-ts">14:37 </span><span class="t-e">âœ— BLOQUEADO: COBOL-01â†’PAYMENTS fuera WL</span></div>
            <div><span class="t-ts">14:37 </span><span class="t-e">â›” AISLANDO: LEGACY-COBOL-01</span></div>
            <div><span class="t-ts">14:37 </span><span class="t-sys">â†’ Registrando en bloque #1309</span></div>
            <div><span class="t-ts">14:37 </span><span class="t-w2">âš  Notificando a CISO Â· ticket SEC-2291</span></div>
          </div>

          <button class="btn btn-ghost" style="width:100%;justify-content:center;margin-top:8px" onclick="alert('AnÃ¡lisis forense del incidente:\n\nOrigen: LEGACY-COBOL-01 (10.0.9.3)\nDestino intentado: PAYMENTS-CORE (10.0.1.50)\nSecuencia: POST /api/transfer â†’ GET /api/balances â†’ POST /api/auth\nAnÃ¡lisis CFI: secuencia POSTâ†’GETâ†’POST no existe en whitelist aprendida.\n\nDiagnÃ³stico: movimiento lateral sospechoso.\nRecomendaciÃ³n: auditorÃ­a forense completa + migraciÃ³n urgente.')">ğŸ” Ver AnÃ¡lisis Forense</button>
        </div>

      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â• CFI-1 â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="s-cfi">
      <div class="sec-head">
        <div>
          <div class="sec-title">CONTROL FLOW INTEGRITY <span class="pill pill-crit" style="vertical-align:middle;margin-left:8px">CFI-1</span></div>
          <div class="sec-sub">Inspirado en CrossGuard (ICSE 2026) Â· Whitelist de flujos aprendida Â· Modo ENFORCE Â· Booleano: flujo en whitelist â†’ sÃ­/no</div>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-ghost" onclick="openCFIModal()">âš™ Config Whitelist</button>
          <button class="btn btn-c" onclick="alert('CFI-1 en modo ENFORCE.\n\nBloqueo automÃ¡tico activo.\nTolerancia: 0 desviaciones.\n\nPara relajar temporalmente: Admin â†’ CFI â†’ Override (requiere doble firma HSM).')">â—‰ Modo ENFORCE</button>
        </div>
      </div>

      <div class="g4" style="margin-bottom:16px">
        <div class="card"><div class="card-label">Flujos en Whitelist</div><div class="big-num" style="color:var(--c)">4.847</div><div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:4px">Aprendidos en fase training 14 dÃ­as</div></div>
        <div class="card"><div class="card-label">Cobertura APIs</div><div class="big-num" style="color:var(--ok)">91%</div><div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:4px">38 / 42 endpoints cubiertos</div></div>
        <div class="card"><div class="card-label">AnomalÃ­as (24h)</div><div class="big-num" style="color:var(--crit)">3</div><div style="font-family:var(--mono);font-size:8px;color:var(--crit);margin-top:4px">1 bloqueada Â· 2 en anÃ¡lisis</div></div>
        <div class="card"><div class="card-label">Latencia aÃ±adida</div><div class="big-num" style="color:var(--ok)" style="font-size:28px">0.3ms</div><div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:4px">overhead per-call Â· aceptable</div></div>
      </div>

      <div class="g2">
        <div class="card">
          <div class="card-title">Estado de Entrenamiento por API</div>
          <table class="tbl" style="margin-top:8px">
            <thead><tr><th>API / Proceso</th><th>Fase</th><th>Flujos WL</th><th>Baseline</th></tr></thead>
            <tbody>
              <tr><td style="color:var(--text2)">/api/payments/*</td><td><span class="pill pill-ok">ENFORCE</span></td><td style="font-family:var(--mono);color:var(--c)">1.247</td><td style="font-family:var(--mono);color:var(--ok)">99.8%</td></tr>
              <tr><td style="color:var(--text2)">/api/auth/*</td><td><span class="pill pill-ok">ENFORCE</span></td><td style="font-family:var(--mono);color:var(--c)">834</td><td style="font-family:var(--mono);color:var(--ok)">99.9%</td></tr>
              <tr><td style="color:var(--text2)">/api/analytics/*</td><td><span class="pill pill-c">APRENDIENDO</span></td><td style="font-family:var(--mono);color:var(--c)">512</td><td style="font-family:var(--mono);color:var(--warn)">96.4%</td></tr>
              <tr><td style="color:var(--text2)">/api/reporting/*</td><td><span class="pill pill-ok">ENFORCE</span></td><td style="font-family:var(--mono);color:var(--c)">391</td><td style="font-family:var(--mono);color:var(--ok)">99.7%</td></tr>
              <tr style="background:rgba(255,48,96,.04)"><td style="color:var(--crit)">LEGACY-COBOL-01</td><td><span class="pill pill-crit">AISLADO</span></td><td style="font-family:var(--mono);color:var(--crit)">â€”</td><td style="font-family:var(--mono);color:var(--crit)">BLOQUEADO</td></tr>
              <tr><td style="color:var(--text2)">/api/kyc/*</td><td><span class="pill pill-warn">PENDIENTE</span></td><td style="font-family:var(--mono);color:var(--border3)">0</td><td style="font-family:var(--mono);color:var(--border3)">â€”</td></tr>
            </tbody>
          </table>
        </div>

        <div class="card">
          <div class="card-title">Feed de AnomalÃ­as</div>
          <div class="anomaly-feed" style="margin-top:8px">
            <div class="anom-item">
              <div class="anom-time">14:37:19</div>
              <div class="anom-type"><span class="pill pill-crit">CRÃTICA</span></div>
              <div class="anom-body">COBOL-01 â†’ PAYMENTS-CORE: secuencia POSTâ†’GETâ†’POST no en whitelist<div class="anom-src">AcciÃ³n: BLOQUEADO + AISLADO Â· bloque #1309</div></div>
            </div>
            <div class="anom-item">
              <div class="anom-time">12:14:03</div>
              <div class="anom-type"><span class="pill pill-warn">MEDIA</span></div>
              <div class="anom-body">DESKTOP-7A3F: llamada a /api/payments sin token de sesiÃ³n vÃ¡lido<div class="anom-src">AcciÃ³n: DENEGADO Â· analizando contexto</div></div>
            </div>
            <div class="anom-item">
              <div class="anom-time">09:58:41</div>
              <div class="anom-type"><span class="pill pill-warn">MEDIA</span></div>
              <div class="anom-body">ANALYTICS-HUB: burst de requests GET /api/clientes a 340 req/s (baseline: 12/s)<div class="anom-src">AcciÃ³n: rate-limited Â· bajo monitorizaciÃ³n extendida</div></div>
            </div>
            <div class="anom-item">
              <div class="anom-time">07:22:17</div>
              <div class="anom-type"><span class="pill pill-ok">BAJA</span></div>
              <div class="anom-body">/api/auth: 3 intentos fallidos consecutivos mismo user-agent<div class="anom-src">AcciÃ³n: log Â· sin bloqueo Â· dentro de tolerancia</div></div>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title">LÃ³gica CFI-1 â€” MÃ¡quina de Estados</div>
        <div style="display:flex;gap:20px;align-items:center;padding:16px;background:var(--bg3);border-radius:2px;margin-top:4px;font-family:var(--mono);font-size:10px">
          <div style="text-align:center"><div style="padding:8px 14px;background:var(--c-dim);border:1px solid rgba(0,212,255,.3);border-radius:2px;color:var(--c)">LLAMADA API</div><div style="color:var(--border3);margin-top:4px;font-size:8px">input</div></div>
          <div style="color:var(--border3)">â”€â”€â†’</div>
          <div style="text-align:center"><div style="padding:8px 14px;background:rgba(255,184,0,.08);border:1px solid rgba(255,184,0,.3);border-radius:2px;color:var(--warn)">Â¿EN WHITELIST?</div><div style="color:var(--border3);margin-top:4px;font-size:8px">booleano</div></div>
          <div style="display:flex;flex-direction:column;gap:20px;align-items:flex-start">
            <div style="display:flex;align-items:center;gap:8px"><div style="color:var(--ok)">SÃ â†’</div><div style="padding:6px 12px;background:var(--ok-dim);border:1px solid rgba(0,232,122,.3);border-radius:2px;color:var(--ok)">PERMITIR Â· LOG</div></div>
            <div style="display:flex;align-items:center;gap:8px"><div style="color:var(--crit)">NO â†’</div><div style="padding:6px 12px;background:var(--crit-dim);border:1px solid rgba(255,48,96,.3);border-radius:2px;color:var(--crit)">BLOQUEAR Â· AISLAR Â· BLOCKCHAIN Â· ALERTA</div></div>
          </div>
        </div>
        <div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:8px">
          Ref: CrossGuard (ICSE 2026) Â· "Control flow attacks introduce previously unseen execution paths" Â· whitelist enforcement, no signature-based detection
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â• PQC-1 â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="s-pqc">
      <div class="sec-head">
        <div>
          <div class="sec-title">QUANTUM-RESISTANT WRAPPER <span class="pill pill-pqc" style="vertical-align:middle;margin-left:8px">PQC-1</span></div>
          <div class="sec-sub">CRYSTALS-Kyber (KEX) Â· CRYSTALS-Dilithium3 (firma) Â· NIST PQC Standards 2024 Â· Adaptador criptogrÃ¡fico sin reescribir infraestructura</div>
        </div>
        <button class="btn btn-pqc" onclick="alert('Exportando configuraciÃ³n PQC...\n\nAlgoritmos activos:\nâ€¢ Firma: CRYSTALS-Dilithium3 (NIST Level 3)\nâ€¢ KEX: CRYSTALS-Kyber-768\nâ€¢ Hash: SHA3-512\n\nTodos los nuevos bloques firmados con PQC.\nFallback clÃ¡sico disponible para sistemas legacy.')">â†“ Exportar Config PQC</button>
      </div>

      <div class="pqc-meter">
        <div style="text-align:center">
          <div class="q-orbit">
            <div class="q-center">Î¨</div>
          </div>
        </div>
        <div>
          <div class="pqc-label">MADUREZ CUÃNTICA</div>
          <div class="pqc-score">73%</div>
        </div>
        <div style="flex:1">
          <div style="font-family:var(--mono);font-size:9px;color:rgba(176,96,255,.7);margin-bottom:8px">Desglose</div>
          <div class="sb-row" style="margin-bottom:8px"><div class="sb-head"><span style="font-size:11px;color:var(--text2)">Firmas blockchain</span><span class="sb-val" style="color:var(--pqc)">87%</span></div><div class="prog"><div class="prog-fill" style="width:87%;background:var(--pqc)"></div></div></div>
          <div class="sb-row" style="margin-bottom:8px"><div class="sb-head"><span style="font-size:11px;color:var(--text2)">APIs internas</span><span class="sb-val" style="color:var(--pqc)">61%</span></div><div class="prog"><div class="prog-fill" style="width:61%;background:var(--pqc)"></div></div></div>
          <div class="sb-row"><div class="sb-head"><span style="font-size:11px;color:var(--text2)">Comunicaciones TLS</span><span class="sb-val" style="color:var(--warn)">54%</span></div><div class="prog"><div class="prog-fill" style="width:54%;background:var(--warn)"></div></div></div>
        </div>
        <div style="font-family:var(--mono);font-size:8px;color:var(--border3);min-width:120px">
          <div style="color:rgba(176,96,255,.5);margin-bottom:4px">Q-DAY PREP</div>
          <div>Target: 100%</div>
          <div>ETA: Q3 2026</div>
          <div style="margin-top:4px;color:var(--crit)">Riesgo actual: MEDIO</div>
        </div>
      </div>

      <div class="g2">
        <div class="card">
          <div class="card-title">ConfiguraciÃ³n del Wrapper PQC</div>

          <div class="toggle-row">
            <div>
              <div class="toggle-label">PQC para firmas blockchain</div>
              <div class="toggle-sub">Todos los bloques nuevos firmados con Dilithium3</div>
            </div>
            <div class="toggle on-pqc" onclick="this.classList.toggle('on-pqc')" title="Click para toggle"></div>
          </div>

          <div class="toggle-row">
            <div>
              <div class="toggle-label">Kyber-768 para intercambio de claves</div>
              <div class="toggle-sub">Key Encapsulation Mechanism post-cuÃ¡ntico</div>
            </div>
            <div class="toggle on-pqc" onclick="this.classList.toggle('on-pqc')"></div>
          </div>

          <div class="toggle-row">
            <div>
              <div class="toggle-label">SHA3-512 para hashing</div>
              <div class="toggle-sub">Reemplaza SHA-256 en nuevos bloques</div>
            </div>
            <div class="toggle on-pqc" onclick="this.classList.toggle('on-pqc')"></div>
          </div>

          <div class="toggle-row">
            <div>
              <div class="toggle-label">Fallback ECDSA para sistemas legacy</div>
              <div class="toggle-sub">Compatibilidad con infraestructura clÃ¡sica</div>
            </div>
            <div class="toggle on" onclick="this.classList.toggle('on')"></div>
          </div>

          <div class="toggle-row" style="border:none">
            <div>
              <div class="toggle-label">MigraciÃ³n automÃ¡tica bloques legacy</div>
              <div class="toggle-sub">Re-firma progresiva de bloques ECDSA â†’ Dilithium3</div>
            </div>
            <div class="toggle" onclick="this.classList.toggle('on-pqc')"></div>
          </div>
        </div>

        <div class="card">
          <div class="card-title">Algoritmos Activos</div>
          <table class="tbl" style="margin-top:8px">
            <thead><tr><th>FunciÃ³n</th><th>Algoritmo</th><th>Nivel NIST</th><th>Estado</th></tr></thead>
            <tbody>
              <tr>
                <td style="color:var(--text2)">Firma digital</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--pqc)">CRYSTALS-Dilithium3</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--ok)">Level 3</td>
                <td><span class="pill pill-pqc">ACTIVO</span></td>
              </tr>
              <tr>
                <td style="color:var(--text2)">KEX</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--pqc)">CRYSTALS-Kyber-768</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--ok)">Level 3</td>
                <td><span class="pill pill-pqc">ACTIVO</span></td>
              </tr>
              <tr>
                <td style="color:var(--text2)">Hashing</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--c)">SHA3-512</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--ok)">â€”</td>
                <td><span class="pill pill-ok">ACTIVO</span></td>
              </tr>
              <tr>
                <td style="color:var(--text2)">Firma (fallback)</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--border3)">ECDSA P-256</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--warn)">ClÃ¡sico</td>
                <td><span class="pill pill-warn">LEGACY</span></td>
              </tr>
              <tr>
                <td style="color:var(--text2)">Hash (fallback)</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--border3)">SHA-256</td>
                <td style="font-family:var(--mono);font-size:9px;color:var(--warn)">ClÃ¡sico</td>
                <td><span class="pill pill-warn">LEGACY</span></td>
              </tr>
            </tbody>
          </table>
          <div style="font-family:var(--mono);font-size:8px;color:var(--border3);margin-top:10px">
            Refs: NIST FIPS 203 (Kyber) Â· NIST FIPS 204 (Dilithium) Â· Publicados 2024. El wrapper no modifica la estructura de la cadena subyacente.
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â• HSM-1 â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="s-hsm">
      <div class="sec-head">
        <div>
          <div class="sec-title">SOBERANÃA DE CLAVES Â· HSM <span class="pill pill-ok" style="vertical-align:middle;margin-left:8px">HSM-1</span></div>
          <div class="sec-sub">Thales Luna 7 Â· Claves nunca abandonan el hardware del cliente Â· OMEGA es solo orquestador Â· Santo Grial de la custodia</div>
        </div>
        <button class="btn btn-ghost" onclick="alert('Certificaciones HSM activas:\n\nFIPS 140-3 Level 3\nCommon Criteria EAL4+\nPCI HSM v3\n\nHardware: Thales Luna Network HSM 7\nFirmware: 7.4.0 Â· Certificado NIST')">ğŸ“‹ Certificaciones</button>
      </div>

      <div class="alert-b alert-ok">
        <span>ğŸ”‘</span><span><strong>MODO SOBERANO ACTIVO:</strong> Las claves maestras residen en Thales Luna 7 on-premise del cliente. OMEGA no tiene acceso a material criptogrÃ¡fico â€” solo envÃ­a peticiones de firma al HSM. Booleano: Â¿Clave en HSM cliente? <strong>SÃ</strong>.</span>
      </div>

      <div class="card" style="margin-bottom:16px">
        <div class="card-title">Arquitectura de Custodia</div>
        <div class="hsm-diagram">
          <div class="hsm-box hsm-omega">
            <div style="font-size:24px;margin-bottom:6px">âŒ¬</div>
            <div class="hsm-title" style="color:var(--c)">OMEGA</div>
            <div class="hsm-sub">Orquestador</div>
            <div style="margin-top:8px;font-family:var(--mono);font-size:8px;color:var(--border3)">Genera: payload</div>
            <div style="font-family:var(--mono);font-size:8px;color:var(--border3)">EnvÃ­a: peticiÃ³n firma</div>
            <div style="font-family:var(--mono);font-size:8px;color:var(--crit);margin-top:4px">NUNCA tiene clave</div>
          </div>

          <div style="display:flex;flex-direction:column;align-items:center;gap:4px;margin:0 8px">
            <div class="hsm-wire" style="width:50px"></div>
            <div style="font-family:var(--mono);font-size:7px;color:var(--border3)">mTLS</div>
            <div style="font-family:var(--mono);font-size:7px;color:var(--pqc)">Kyber-768</div>
          </div>

          <div class="hsm-box hsm-client">
            <div style="font-size:24px;margin-bottom:6px">â¬›</div>
            <div class="hsm-title" style="color:var(--ok)">THALES LUNA 7</div>
            <div class="hsm-sub" style="color:rgba(0,232,122,.5)">HSM on-premise cliente</div>
            <div style="margin-top:8px;font-family:var(--mono);font-size:8px;color:var(--ok)">âœ“ Clave maestra aquÃ­</div>
            <div style="font-family:var(--mono);font-size:8px;color:var(--ok)">âœ“ Firma en hardware</div>
            <div style="font-family:var(--mono);font-size:8px;color:var(--ok)">âœ“ Clave no exportable</div>
            <div style="font-family:var(--mono);font-size:8px;color:var(--ok)">âœ“ FIPS 140-3 Level 3</div>
          </div>

          <div style="display:flex;flex-direction:column;align-items:center;gap:4px;margin:0 8px">
            <div style="width:50px;height:2px;background:repeating-linear-gradient(90deg,var(--ok) 0,var(--ok) 6px,transparent 6px,transparent 12px)"></div>
            <div style="font-family:var(--mono);font-size:7px;color:var(--border3)">firma</div>
          </div>

          <div class="hsm-box" style="background:rgba(0,212,255,.08);border:1px solid rgba(0,212,255,.3)">
            <div style="font-size:24px;margin-bottom:6px">â¬¡</div>
            <div class="hsm-title" style="color:var(--c)">BLOCKCHAIN</div>
            <div class="hsm-sub">Registro inmutable</div>
            <div style="margin-top:8px;font-family:var(--mono);font-size:8px;color:var(--c)">Recibe: firma vÃ¡lida</div>
            <div style="font-family:var(--mono);font-size:8px;color:var(--c)">Almacena: bloque</div>
            <div style="font-family:var(--mono);font-size:8px;color:var(--pqc);margin-top:4px">Î¨ Dilithium3</div>
          </div>
        </div>
      </div>

      <div class="g2">
        <div class="card">
          <div class="card-title">Estado del HSM</div>
          <div class="toggle-row">
            <div><div class="toggle-label">Modo Soberano</div><div class="toggle-sub">Claves en HSM cliente</div></div>
            <div class="toggle on" onclick="this.classList.toggle('on')"></div>
          </div>
          <div class="toggle-row">
            <div><div class="toggle-label">RotaciÃ³n automÃ¡tica de claves</div><div class="toggle-sub">Cada 90 dÃ­as Â· prÃ³xima: 15/05/2026</div></div>
            <div class="toggle on" onclick="this.classList.toggle('on')"></div>
          </div>
          <div class="toggle-row">
            <div><div class="toggle-label">Doble firma requerida</div><div class="toggle-sub">Operaciones crÃ­ticas requieren 2 HSM officers</div></div>
            <div class="toggle on" onclick="this.classList.toggle('on')"></div>
          </div>
          <div class="toggle-row" style="border:none">
            <div><div class="toggle-label">AuditorÃ­a HSM en blockchain</div><div class="toggle-sub">Cada uso del HSM genera bloque PQC</div></div>
            <div class="toggle on-pqc" onclick="this.classList.toggle('on-pqc')"></div>
          </div>

          <div class="hsm-key-status">
            <span style="color:var(--ok)">â—</span>
            <span style="color:var(--text2)">Thales Luna 7 Â· Online Â· 0 exportaciones</span>
            <span style="margin-left:auto;font-family:var(--mono);font-size:8px;color:var(--ok)">FIPS 140-3 L3 âœ“</span>
          </div>
        </div>

        <div class="card">
          <div class="card-title">Operaciones Recientes del HSM</div>
          <div class="terminal" style="max-height:220px">
            <div><span class="t-ts">14:41 </span><span class="t-ok2">âœ“ Firma bloque #1310 Â· Dilithium3</span></div>
            <div><span class="t-ts">14:37 </span><span class="t-ok2">âœ“ Firma bloque #1309 Â· incidente CFI</span></div>
            <div><span class="t-ts">13:00 </span><span class="t-pq">Î¨ RotaciÃ³n programada Â· nueva clave ephemeral</span></div>
            <div><span class="t-ts">13:00 </span><span class="t-ok2">âœ“ Clave maestra NO exportada Â· deriva local</span></div>
            <div><span class="t-ts">12:30 </span><span class="t-ok2">âœ“ mTLS renovado Â· Kyber-768</span></div>
            <div><span class="t-ts">09:00 </span><span class="t-ok2">âœ“ Health check Â· todos los mÃ³dulos OK</span></div>
            <div><span class="t-ts">00:00 </span><span class="t-pq">Î¨ Audit log exportado Â· encriptado Kyber</span></div>
            <div><span class="t-dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 23/02/2026 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></div>
            <div><span class="t-ts">22:15 </span><span class="t-ok2">âœ“ Firma informe PCI DSS Â· PDF firmado</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â• UI-1: LOW-CODE â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="s-lowcode">
      <div class="sec-head">
        <div>
          <div class="sec-title">LOW-CODE COMPLIANCE Â· KYC/AML <span class="pill pill-c" style="vertical-align:middle;margin-left:8px">UI-1</span></div>
          <div class="sec-sub">Constructor visual de flujos Â· Drag & Drop Â· Configurable por el Oficial de Cumplimiento Â· Sin ingenieros</div>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-ghost" onclick="alert('Flujo guardado en blockchain.\nHash: b2c3d4e5...\nFirmado: Dilithium3 Â· #bloque 1312\n\nEl Agente RGPD-01 ejecutarÃ¡ este flujo automÃ¡ticamente.')">ğŸ’¾ Guardar Flujo</button>
          <button class="btn btn-c" onclick="deployFlow()">â–¶ Desplegar</button>
        </div>
      </div>

      <div class="alert-b alert-ok">
        <span>â–£</span><span>Flujo activo: <strong>"KYC â€” Nuevo Cliente Corporativo"</strong> Â· ejecutado 47 veces hoy Â· tasa aceptaciÃ³n 82% Â· desencadenado por Agente RGPD-01</span>
      </div>

      <div class="flow-toolbar">
        <div style="font-family:var(--mono);font-size:8px;color:var(--border3);align-self:center;letter-spacing:.1em;margin-right:4px">BLOQUES:</div>
        <div class="flow-drag-block fdb-event" draggable="true" onclick="addBlock('event')">â¬¡ EVENTO</div>
        <div class="flow-drag-block fdb-cond" draggable="true" onclick="addBlock('cond')">â—‡ CONDICIÃ“N</div>
        <div class="flow-drag-block fdb-action" draggable="true" onclick="addBlock('action')">â–£ ACCIÃ“N</div>
        <div class="flow-drag-block fdb-end" draggable="true" onclick="addBlock('end')">â—ˆ FIN / RESULTADO</div>
        <div style="margin-left:auto;display:flex;gap:6px">
          <button class="btn btn-ghost" style="font-size:8px" onclick="clearCanvas()">âŠ  Limpiar</button>
          <button class="btn btn-ghost" style="font-size:8px" onclick="loadTemplate()">ğŸ“‹ Cargar Template KYC</button>
        </div>
      </div>

      <div class="flow-canvas" id="flowCanvas" style="min-height:360px;margin-bottom:16px">
        <svg class="flow-arrows" id="flowArrows" style="position:absolute;inset:0;width:100%;height:100%;overflow:visible"></svg>
        <div class="flow-canvas-label" id="canvasHint">
          <div style="font-family:var(--mono);font-size:10px;color:var(--border3)">Haz click en los bloques de arriba para aÃ±adirlos</div>
          <div style="font-family:var(--mono);font-size:9px;color:var(--border);margin-top:4px">o carga un template con "ğŸ“‹ Cargar Template KYC"</div>
        </div>
      </div>

      <div class="g2">
        <div class="card">
          <div class="card-title">Flujos Activos</div>
          <table class="tbl" style="margin-top:8px">
            <thead><tr><th>Nombre</th><th>Trigger</th><th>Ejecuciones</th><th>Estado</th></tr></thead>
            <tbody>
              <tr><td style="color:var(--text2)">KYC Nuevo Cliente Corp.</td><td style="font-family:var(--mono);font-size:9px">NUEVO_CLIENTE</td><td style="font-family:var(--mono);color:var(--c)">47</td><td><span class="pill pill-ok">ACTIVO</span></td></tr>
              <tr><td style="color:var(--text2)">AML Transferencia >50kâ‚¬</td><td style="font-family:var(--mono);font-size:9px">TX_HIGH_VALUE</td><td style="font-family:var(--mono);color:var(--c)">12</td><td><span class="pill pill-ok">ACTIVO</span></td></tr>
              <tr><td style="color:var(--text2)">DORA Incidente ICT</td><td style="font-family:var(--mono);font-size:9px">ICT_INCIDENT</td><td style="font-family:var(--mono);color:var(--c)">3</td><td><span class="pill pill-ok">ACTIVO</span></td></tr>
              <tr><td style="color:var(--text2)">PEP Screening Mensual</td><td style="font-family:var(--mono);font-size:9px">SCHEDULE_MONTHLY</td><td style="font-family:var(--mono);color:var(--c)">1</td><td><span class="pill pill-warn">DRAFT</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="card">
          <div class="card-title">Ãšltimo Flujo Ejecutado â€” KYC Corp.</div>
          <div class="terminal" style="max-height:180px;margin-top:6px">
            <div><span class="t-ts">14:38 </span><span class="t-sys">TRIGGER: NUEVO_CLIENTE Â· Acme Financial S.A.</span></div>
            <div><span class="t-ts">14:38 </span><span class="t-ok2">âœ“ EVENTO: cliente en base de datos</span></div>
            <div><span class="t-ts">14:38 </span><span class="t-sys">â†’ ACCIÃ“N: verificar KYC documental</span></div>
            <div><span class="t-ts">14:39 </span><span class="t-ok2">âœ“ KYC score: 0.91 â‰¥ 0.8</span></div>
            <div><span class="t-ts">14:39 </span><span class="t-sys">â†’ CONDICIÃ“N: score â‰¥ 0.8? SÃ</span></div>
            <div><span class="t-ts">14:39 </span><span class="t-ok2">âœ“ ACCIÃ“N: aprobar Â· crear cuenta</span></div>
            <div><span class="t-ts">14:39 </span><span class="t-pq">Î¨ FIN: evidencia en bloque #1308</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â• AELA â•â•â•â•â•â•â•â•â•â• -->
    <section class="section" id="s-aela">
      <div class="sec-head">
        <div><div class="sec-title">MODELO AELA</div><div class="sec-sub">Agentic Enterprise License Agreement Â· Todo lo que puedas consumir Â· Precio: el que yo diga. Zehahahaha.</div></div>
      </div>
      <div class="g3" style="margin-bottom:16px">
        <div class="card"><div class="card-label">ARR Pipeline Q-SAFE</div><div class="big-num" style="color:var(--ok);font-size:42px">â‚¬7.8M</div><div style="font-size:11px;color:var(--ok);margin-top:4px">â†‘ 86% vs v1.0 gracias a PQC + CFI</div></div>
        <div class="card"><div class="card-label">Precio objetivo / cliente</div><div class="big-num" style="color:var(--c);font-size:32px">>500kâ‚¬</div><div style="font-size:11px;color:var(--border3);margin-top:4px">hasta âˆ Â· precio: el que yo diga</div></div>
        <div class="card"><div class="card-label">Ventaja vs Gartner</div><div style="font-family:var(--mono);font-size:13px;color:var(--pqc);margin-top:8px">Tienen que esperar</div><div style="font-size:11px;color:var(--border3);margin-top:4px">a leer el paper para entenderlo</div></div>
      </div>
      <div class="card">
        <div class="card-title">Tiers AELA v2.0 â€” Q-SAFE Edition</div>
        <table class="tbl" style="margin-top:10px">
          <thead><tr><th>Tier</th><th>Incluye</th><th>Target</th><th>Precio</th></tr></thead>
          <tbody>
            <tr><td><span class="pill pill-c">OMEGA CORE v2</span></td><td style="font-size:11px">Dashboard + Normativas + Blockchain</td><td style="color:var(--border3)">Medianas empresas</td><td style="font-family:var(--mono);color:var(--ok)">â‚¬150k/aÃ±o</td></tr>
            <tr><td><span class="pill pill-warn">OMEGA Q-SAFE</span></td><td style="font-size:11px">Core + CFI-1 + PQC-1 + Agentes IA</td><td style="color:var(--border3)">Banca Â· Seguros</td><td style="font-family:var(--mono);color:var(--ok)">â‚¬650k/aÃ±o</td></tr>
            <tr><td><span class="pill pill-pqc">OMEGA SOVEREIGN</span></td><td style="font-size:11px">Q-SAFE + HSM-1 + Low-Code + SLA 99.99%</td><td style="color:var(--border3)">Bancos centrales Â· Gobierno Â· Defensa</td><td style="font-family:var(--mono);color:var(--ok)">Negociable Â· >2Mâ‚¬</td></tr>
            <tr><td><span class="pill pill-ok">OMEGA RESEARCH</span></td><td style="font-size:11px">Todo + acceso API experimental Â· white-label</td><td style="color:var(--border3)">Labs Â· Bancos centrales Â· ENISA</td><td style="font-family:var(--mono);color:var(--ok)">El que yo diga</td></tr>
          </tbody>
        </table>
      </div>
    </section>

  </div><!-- /content -->
</main>

<!-- â•â•â•â•â•â•â•â•â•â• MODALS â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-ov" id="simModal">
  <div class="modal-box">
    <div class="modal-close" onclick="closeModal('simModal')">âœ•</div>
    <div class="modal-title" style="color:var(--crit)">ğŸ’€ SIMULACIÃ“N: ATAQUE LATERAL</div>
    <div style="font-family:var(--mono);font-size:9px;color:var(--border3);margin-bottom:16px">Escenario: Ransomware + exfiltraciÃ³n Â· Vector: LEGACY-COBOL-01</div>
    <div class="g2" style="margin-bottom:16px">
      <div><div style="font-family:var(--mono);font-size:8px;color:var(--border3);letter-spacing:.15em">SIN OMEGA Q-SAFE</div><div style="font-family:var(--mono);font-size:22px;color:var(--crit);margin-top:4px">847.291</div><div style="font-size:11px;color:var(--border3)">registros exfiltrados</div><div style="font-family:var(--mono);font-size:16px;color:var(--warn);margin-top:6px">â‚¬24.8M multa RGPD</div><div style="font-size:11px;color:var(--border3)">DetecciÃ³n: 4.2 dÃ­as</div></div>
      <div><div style="font-family:var(--mono);font-size:8px;color:var(--border3);letter-spacing:.15em">CON OMEGA Q-SAFE</div><div style="font-family:var(--mono);font-size:22px;color:var(--ok);margin-top:4px">0</div><div style="font-size:11px;color:var(--border3)">registros exfiltrados</div><div style="font-family:var(--mono);font-size:16px;color:var(--ok);margin-top:6px">â‚¬0 multa</div><div style="font-size:11px;color:var(--ok)">CFI-1 bloqueÃ³ en 0.3ms</div></div>
    </div>
    <div style="background:var(--bg3);border:1px solid var(--border);border-radius:2px;padding:12px;font-family:var(--mono);font-size:9px;line-height:2;margin-bottom:16px">
      <div><span class="t-e">âœ— COBOL-01â†’PAYMENTS: flujo fuera de whitelist</span></div>
      <div><span class="t-e">â›” CFI-1: BLOQUEADO en 0.3ms Â· AISLADO</span></div>
      <div><span class="t-pq">Î¨ Evento firmado Dilithium3 Â· HSM Â· bloque #1309</span></div>
      <div><span class="t-ok2">âœ“ Agente SENTINEL: ticket SEC-2291 abierto Â· CISO notificado</span></div>
    </div>
    <div style="display:flex;gap:8px">
      <button class="btn btn-ghost" onclick="closeModal('simModal')">Cerrar</button>
      <button class="btn btn-c" onclick="closeModal('simModal');alert('Plan de remediaciÃ³n generado por Agente SENTINEL:\n\n1. Cifrar LEGACY-COBOL-01 (prioridad: INMEDIATA)\n2. Deshabilitar acceso red hasta certificaciÃ³n CFI\n3. Habilitar MFA en 27 usuarios restantes\n4. Actualizar SCCs AWS (RGPD Art.46)\n5. Contratar OMEGA SOVEREIGN\n\nPrecio: el que yo diga.')">Generar Plan RemediaciÃ³n</button>
    </div>
  </div>
</div>

<div class="modal-ov" id="newAgentModal">
  <div class="modal-box">
    <div class="modal-close" onclick="closeModal('newAgentModal')">âœ•</div>
    <div class="modal-title" style="color:var(--c)">+ Nuevo Agente AutÃ³nomo</div>
    <div style="font-family:var(--mono);font-size:9px;color:var(--border3);margin-bottom:16px">Define el objetivo de alto nivel. El agente planificarÃ¡ los pasos automÃ¡ticamente.</div>
    <div style="margin-bottom:12px">
      <div style="font-family:var(--mono);font-size:8px;color:var(--border3);letter-spacing:.15em;margin-bottom:6px">NORMATIVA OBJETIVO</div>
      <div style="display:flex;flex-wrap:wrap;gap:6px">
        <div class="pill pill-c" style="cursor:pointer;padding:5px 10px">RGPD</div>
        <div class="pill pill-warn" style="cursor:pointer;padding:5px 10px">DORA</div>
        <div class="pill pill-ok" style="cursor:pointer;padding:5px 10px">PCI DSS</div>
        <div class="pill pill-c" style="cursor:pointer;padding:5px 10px">NIS2</div>
        <div class="pill pill-pqc" style="cursor:pointer;padding:5px 10px">ISO 27001</div>
        <div class="pill pill-ok" style="cursor:pointer;padding:5px 10px">CMMC 2.0</div>
      </div>
    </div>
    <div style="margin-bottom:12px">
      <div style="font-family:var(--mono);font-size:8px;color:var(--border3);letter-spacing:.15em;margin-bottom:6px">TAREA DE ALTO NIVEL</div>
      <input class="task-input" id="newAgentTask" placeholder="Ej: Auditar el acceso a datos personales de los Ãºltimos 30 dÃ­as..." style="width:100%"/>
    </div>
    <div style="margin-bottom:16px">
      <div style="font-family:var(--mono);font-size:8px;color:var(--border3);letter-spacing:.15em;margin-bottom:6px">OPCIONES</div>
      <div class="toggle-row" style="border:none;padding:6px 0"><div><div class="toggle-label" style="font-size:12px">Volcar logs al blockchain</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
      <div class="toggle-row" style="border:none;padding:6px 0"><div><div class="toggle-label" style="font-size:12px">Firmar evidencias con HSM</div></div><div class="toggle on-pqc" onclick="this.classList.toggle('on-pqc')"></div></div>
    </div>
    <div style="display:flex;gap:8px">
      <button class="btn btn-ghost" onclick="closeModal('newAgentModal')">Cancelar</button>
      <button class="btn btn-c" style="flex:1;justify-content:center" onclick="deployAgent()">â–¶ Desplegar Agente</button>
    </div>
  </div>
</div>

<div class="modal-ov" id="cfiModal">
  <div class="modal-box">
    <div class="modal-close" onclick="closeModal('cfiModal')">âœ•</div>
    <div class="modal-title" style="color:var(--c)">âš™ ConfiguraciÃ³n CFI-1</div>
    <div style="font-family:var(--mono);font-size:9px;color:var(--border3);margin-bottom:16px">GestiÃ³n de whitelist y fases de entrenamiento</div>
    <div class="toggle-row"><div><div class="toggle-label">Modo ENFORCE</div><div class="toggle-sub">Bloquea automÃ¡ticamente flujos no en whitelist</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row"><div><div class="toggle-label">Modo APRENDIZAJE paralelo</div><div class="toggle-sub">Aprende nuevos flujos legÃ­timos mientras enforce activo</div></div><div class="toggle on" onclick="this.classList.toggle('on')"></div></div>
    <div class="toggle-row" style="border:none"><div><div class="toggle-label">Alerta antes de bloquear</div><div class="toggle-sub">Notifica al CISO 30s antes de bloqueo automÃ¡tico</div></div><div class="toggle" onclick="this.classList.toggle('on')"></div></div>
    <div style="margin-top:14px;display:flex;gap:8px">
      <button class="btn btn-ghost" onclick="closeModal('cfiModal')">Cancelar</button>
      <button class="btn btn-c" onclick="closeModal('cfiModal');alert('ConfiguraciÃ³n CFI guardada.\nRegistrada en bloque #1313.\nFirmada: Dilithium3 Â· HSM.')">Guardar</button>
    </div>
  </div>
</div>

<div class="omega-const">Î© 1310 Â· Q-SAFE</div>

<script>
// â”€â”€â”€ CLOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateClock() {
  const now = new Date();
  document.getElementById('clock').textContent =
    now.toLocaleTimeString('es-ES', {hour:'2-digit',minute:'2-digit',second:'2-digit'}) + ' UTC+1';
}
setInterval(updateClock, 1000);
updateClock();

// â”€â”€â”€ NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function nav(el, sectionId) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  const sec = document.getElementById(sectionId);
  if (sec) sec.classList.add('active');
  if (el) el.classList.add('active');
}

// â”€â”€â”€ MODALS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openSimModal()      { document.getElementById('simModal').classList.add('open'); }
function openNewAgentModal() { document.getElementById('newAgentModal').classList.add('open'); }
function openCFIModal()      { document.getElementById('cfiModal').classList.add('open'); }
function closeModal(id)      { document.getElementById(id).classList.remove('open'); }

// â”€â”€â”€ AGENT TASK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function assignTask(inputId) {
  const val = document.getElementById(inputId).value;
  if (!val.trim()) {
    alert('Introduce una tarea de alto nivel para el agente.\nEj: "Revisar contratos con proveedores ICT para DORA Art. 28"');
    return;
  }
  alert(`Tarea asignada al Agente DORA-01:\n\n"${val}"\n\nPlanificando pasos autÃ³nomos...\n\nLos logs se volcarÃ¡n al blockchain con firma Dilithium3.`);
  document.getElementById(inputId).value = '';
}

function deployAgent() {
  const task = document.getElementById('newAgentTask').value;
  closeModal('newAgentModal');
  setTimeout(() => {
    alert(`Agente desplegado.\n\nTarea: "${task || 'AuditorÃ­a general'}"\n\nEl agente ha planificado los pasos necesarios y comenzarÃ¡ la ejecuciÃ³n inmediatamente.\n\nLogs en tiempo real: Orquestador IA â†’ nuevo agente.`);
  }, 200);
}

// â”€â”€â”€ FLOW CANVAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const blockTemplates = {
  event:  { cls:'event-block',  label:'â¬¡ EVENTO',      desc:'Nuevo Cliente',        x:60,  y:40  },
  cond:   { cls:'cond-block',   label:'â—‡ CONDICIÃ“N',   desc:'Score KYC â‰¥ 0.8?',     x:200, y:160 },
  action: { cls:'action-block', label:'â–£ ACCIÃ“N',      desc:'Verificar KYC',        x:60,  y:160 },
  end:    { cls:'end-block',    label:'â—ˆ RESULTADO',   desc:'Aprobar / Rechazar',   x:340, y:280 },
};

let blockCount = 0;
let canvasBlocks = [];

function addBlock(type) {
  const canvas = document.getElementById('flowCanvas');
  const hint   = document.getElementById('canvasHint');
  if (hint) hint.style.display = 'none';

  const t = blockTemplates[type];
  const el = document.createElement('div');
  el.className = `flow-block ${t.cls}`;
  el.id = `fb_${blockCount++}`;
  el.style.left = (60 + (blockCount % 4) * 130) + 'px';
  el.style.top  = (30 + Math.floor((blockCount-1) / 4) * 100) + 'px';
  el.innerHTML = `<div style="font-size:9px;opacity:.6">${t.label}</div><div style="margin-top:3px">${t.desc}</div>`;

  // Draggable
  let dragging = false, ox, oy;
  el.addEventListener('mousedown', (e) => {
    dragging = true;
    ox = e.clientX - el.offsetLeft;
    oy = e.clientY - el.offsetTop;
    el.style.zIndex = 20;
    el.style.cursor = 'grabbing';
  });
  document.addEventListener('mousemove', (e) => {
    if (!dragging) return;
    const rect = canvas.getBoundingClientRect();
    el.style.left = Math.max(0, Math.min(e.clientX - rect.left - ox, rect.width - el.offsetWidth)) + 'px';
    el.style.top  = Math.max(0, Math.min(e.clientY - rect.top  - oy, rect.height - el.offsetHeight)) + 'px';
    drawArrows();
  });
  document.addEventListener('mouseup', () => { dragging = false; el.style.cursor = 'grab'; el.style.zIndex = ''; });

  canvas.appendChild(el);
  canvasBlocks.push({ el, type });
  setTimeout(drawArrows, 50);
}

function drawArrows() {
  const svg = document.getElementById('flowArrows');
  svg.innerHTML = '';
  if (canvasBlocks.length < 2) return;
  for (let i = 0; i < canvasBlocks.length - 1; i++) {
    const a = canvasBlocks[i].el;
    const b = canvasBlocks[i+1].el;
    const ax = a.offsetLeft + a.offsetWidth / 2;
    const ay = a.offsetTop  + a.offsetHeight;
    const bx = b.offsetLeft + b.offsetWidth / 2;
    const by = b.offsetTop;
    const line = document.createElementNS('http://www.w3.org/2000/svg','line');
    line.setAttribute('x1', ax); line.setAttribute('y1', ay);
    line.setAttribute('x2', bx); line.setAttribute('y2', by);
    line.setAttribute('stroke', 'rgba(0,212,255,0.3)');
    line.setAttribute('stroke-width', '1.5');
    line.setAttribute('stroke-dasharray', '4,3');
    line.setAttribute('marker-end', 'url(#arr)');
    svg.appendChild(line);
  }
  // Arrow marker
  if (!svg.querySelector('defs')) {
    const defs = document.createElementNS('http://www.w3.org/2000/svg','defs');
    defs.innerHTML = `<marker id="arr" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto"><path d="M0,0 L0,6 L6,3 z" fill="rgba(0,212,255,0.5)"/></marker>`;
    svg.appendChild(defs);
  }
}

function clearCanvas() {
  const canvas = document.getElementById('flowCanvas');
  document.querySelectorAll('.flow-block').forEach(b => b.remove());
  document.getElementById('flowArrows').innerHTML = '';
  canvasBlocks = [];
  blockCount = 0;
  document.getElementById('canvasHint').style.display = 'block';
}

function loadTemplate() {
  clearCanvas();
  setTimeout(() => {
    ['event', 'action', 'cond', 'action', 'end'].forEach((t, i) => {
      setTimeout(() => addBlockAt(t, i), i * 100);
    });
  }, 50);
}

const templatePositions = [
  {x:120, y:20,  desc:'Nuevo Cliente'},
  {x:120, y:100, desc:'Verificar KYC'},
  {x:120, y:185, desc:'Score â‰¥ 0.8?'},
  {x:290, y:185, desc:'Revisar Manual'},
  {x:120, y:270, desc:'Aprobar / Rechazar'},
];

function addBlockAt(type, idx) {
  const canvas = document.getElementById('flowCanvas');
  const hint = document.getElementById('canvasHint');
  if (hint) hint.style.display = 'none';
  const t = blockTemplates[type];
  const pos = templatePositions[idx];
  const el = document.createElement('div');
  el.className = `flow-block ${t.cls}`;
  el.id = `fb_${blockCount++}`;
  el.style.left = pos.x + 'px';
  el.style.top  = pos.y + 'px';
  el.innerHTML = `<div style="font-size:9px;opacity:.6">${t.label}</div><div style="margin-top:3px">${pos.desc}</div>`;
  let dragging = false, ox, oy;
  el.addEventListener('mousedown', (e) => { dragging=true; ox=e.clientX-el.offsetLeft; oy=e.clientY-el.offsetTop; });
  document.addEventListener('mousemove', (e) => {
    if (!dragging) return;
    const rect = canvas.getBoundingClientRect();
    el.style.left = Math.max(0, Math.min(e.clientX-rect.left-ox, rect.width-el.offsetWidth)) + 'px';
    el.style.top  = Math.max(0, Math.min(e.clientY-rect.top-oy, rect.height-el.offsetHeight)) + 'px';
    drawArrows();
  });
  document.addEventListener('mouseup', () => { dragging=false; });
  canvas.appendChild(el);
  canvasBlocks.push({el, type});
  setTimeout(drawArrows, 50);
}

function deployFlow() {
  if (canvasBlocks.length === 0) {
    alert('DiseÃ±a un flujo primero usando los bloques del toolbar\no carga el template KYC.');
    return;
  }
  alert(`Flujo desplegado (${canvasBlocks.length} bloques).\n\nGuardado en blockchain â†’ bloque #1312\nFirmado: Dilithium3 Â· HSM Thales Luna 7\n\nEl Agente RGPD-01 ejecutarÃ¡ este flujo automÃ¡ticamente cuando se detecte el trigger configurado.`);
}
</script>
</body>
</html>
