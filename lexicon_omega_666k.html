<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LEXICÓN Ω — 666.666 SENTENCIAS — CÁTEDRA TOTAL</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&family=IM+Fell+English:ital@0;1&family=Courier+Prime:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --void: #08060a;
  --parchment: #c8b47a;
  --parchment-dim: #7a6a44;
  --blood: #7a0000;
  --blood-bright: #b50000;
  --acid: #b8ff00;
  --matrix: #00ff5a;
  --matrix-dim: #004f1c;
  --folio-bg: #0e0b08;
  --folio-border: #2a2010;
  --mercury: #ccc4b8;
  --ash: #555040;
  --ink: #1a1408;
  --shadow-gold: rgba(200,180,122,0.08);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background-color: var(--void);
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4'%3E%3Crect width='4' height='4' fill='%23080608'/%3E%3Crect x='0' y='0' width='1' height='1' fill='%230f0c10' opacity='0.6'/%3E%3Crect x='2' y='2' width='1' height='1' fill='%230f0c10' opacity='0.3'/%3E%3C/svg%3E"),
    radial-gradient(ellipse at 20% 0%, #1a0a00 0%, transparent 60%),
    radial-gradient(ellipse at 80% 100%, #000718 0%, transparent 60%);
  color: var(--mercury);
  font-family: 'Courier Prime', monospace;
  font-size: 12px;
  min-height: 100vh;
  overflow-x: hidden;
}

/* ─── SCANLINES ─── */
body::before {
  content: '';
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 3px,
    rgba(0,0,0,0.18) 3px,
    rgba(0,0,0,0.18) 4px
  );
  pointer-events: none; z-index: 1000;
}

/* ─── MASTER WRAPPER ─── */
.codex {
  max-width: 1360px;
  margin: 0 auto;
  padding: 30px 20px 60px;
  position: relative;
}

/* ─── HEADER ─── */
.header-outer {
  border: 2px solid var(--parchment-dim);
  border-top: 8px double var(--parchment);
  border-bottom: 8px double var(--parchment);
  padding: 40px 50px;
  margin-bottom: 30px;
  background: linear-gradient(180deg, rgba(26,14,0,0.98) 0%, rgba(14,11,8,0.99) 100%);
  position: relative;
  overflow: hidden;
}
.header-outer::after {
  content: '';
  position: absolute; top: -2px; left: 50%; transform: translateX(-50%);
  width: 80%; height: 2px;
  background: linear-gradient(90deg, transparent, var(--parchment), transparent);
}

.sigil-row {
  text-align: center;
  font-size: 10px;
  color: var(--ash);
  letter-spacing: 6px;
  margin-bottom: 20px;
  text-transform: uppercase;
}

h1.titulo-magno {
  font-family: 'IM Fell English SC', serif;
  font-size: clamp(1.6rem, 4vw, 3.2rem);
  color: var(--parchment);
  text-align: center;
  text-shadow: 0 0 40px rgba(200,180,122,0.3), 0 2px 4px rgba(0,0,0,0.9);
  letter-spacing: 3px;
  line-height: 1.2;
  margin-bottom: 10px;
}
h2.subtitulo {
  font-family: 'IM Fell English', serif;
  font-style: italic;
  text-align: center;
  color: var(--blood-bright);
  font-size: 1rem;
  letter-spacing: 2px;
  margin-bottom: 25px;
}

.yaml-header {
  background: #000;
  border: 1px dashed var(--matrix-dim);
  color: var(--matrix);
  font-family: 'Courier Prime', monospace;
  font-size: 10px;
  padding: 12px 18px;
  margin: 20px auto;
  max-width: 700px;
  white-space: pre;
  line-height: 1.6;
}

.counter-strip {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--blood);
  padding: 8px 20px;
  margin-top: 20px;
  border: 1px solid #3a0000;
  font-size: 11px;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 2px;
}
.counter-num {
  font-family: 'IM Fell English SC', serif;
  font-size: 1.1rem;
  color: var(--parchment);
}

/* ─── CONTROLS ─── */
.controls {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
  flex-wrap: wrap;
  align-items: center;
}
.search-box {
  flex: 1;
  min-width: 200px;
  background: var(--folio-bg);
  border: 1px solid var(--ash);
  border-bottom: 2px solid var(--parchment-dim);
  color: var(--mercury);
  padding: 9px 14px;
  font-family: 'Courier Prime', monospace;
  font-size: 11px;
  outline: none;
  transition: border-color 0.2s;
}
.search-box:focus { border-bottom-color: var(--parchment); }
.search-box::placeholder { color: var(--ash); }

.filter-select {
  background: var(--folio-bg);
  border: 1px solid var(--ash);
  border-bottom: 2px solid var(--parchment-dim);
  color: var(--mercury);
  padding: 9px 14px;
  font-family: 'Courier Prime', monospace;
  font-size: 11px;
  cursor: pointer;
  outline: none;
}

.btn-random {
  background: var(--blood);
  border: 1px solid var(--blood-bright);
  color: var(--parchment);
  padding: 9px 18px;
  font-family: 'IM Fell English SC', serif;
  font-size: 12px;
  letter-spacing: 2px;
  cursor: pointer;
  transition: background 0.2s, box-shadow 0.2s;
}
.btn-random:hover {
  background: var(--blood-bright);
  box-shadow: 0 0 20px rgba(181,0,0,0.5);
}

/* ─── VIRTUAL SCROLL ENGINE ─── */
.virtual-wrapper {
  position: relative;
  height: 700px;
  overflow-y: scroll;
  border: 1px solid var(--folio-border);
  border-top: 3px double var(--parchment-dim);
  border-bottom: 3px double var(--parchment-dim);
  background: var(--folio-bg);
}
.virtual-wrapper::-webkit-scrollbar { width: 8px; }
.virtual-wrapper::-webkit-scrollbar-track { background: #060505; }
.virtual-wrapper::-webkit-scrollbar-thumb {
  background: var(--blood);
  border: 1px solid var(--blood-bright);
}

.virtual-spacer-top, .virtual-spacer-bottom {
  width: 100%;
}

.entries-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  gap: 2px;
  padding: 2px;
}

/* ─── ENTRY CARD ─── */
.entry {
  border: 1px solid var(--folio-border);
  border-top: 2px solid;
  padding: 14px 16px 10px;
  background: var(--folio-bg);
  position: relative;
  transition: border-color 0.15s, box-shadow 0.15s;
  cursor: default;
}
.entry:hover {
  box-shadow: 0 0 18px rgba(200,180,122,0.08);
  z-index: 2;
}
.entry-gold  { border-top-color: var(--parchment); }
.entry-blood { border-top-color: var(--blood-bright); }
.entry-acid  { border-top-color: var(--acid); }
.entry-matrix{ border-top-color: var(--matrix); }

.folio-num {
  position: absolute;
  top: 6px; right: 10px;
  font-size: 9px;
  color: var(--ash);
  letter-spacing: 1px;
}

.term {
  font-family: 'IM Fell English SC', serif;
  color: var(--parchment);
  font-size: 1.05rem;
  display: block;
  margin-bottom: 6px;
  line-height: 1.2;
}

.def {
  color: #9a8e7a;
  line-height: 1.6;
  font-style: italic;
  font-size: 11px;
  margin-bottom: 8px;
}

.metadata {
  border-top: 1px solid var(--folio-border);
  padding-top: 6px;
  font-size: 9.5px;
  line-height: 1.5;
}
.meta-line { display: block; color: var(--matrix-dim); }
.meta-line.highlight { color: var(--matrix); }
.meta-line.author { color: var(--parchment-dim); }

/* ─── PAGINATION BAR ─── */
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  margin-top: 20px;
  flex-wrap: wrap;
}
.page-info {
  font-size: 11px;
  color: var(--ash);
  letter-spacing: 1px;
  text-align: center;
  margin-top: 10px;
}
.page-btn {
  background: var(--ink);
  border: 1px solid var(--ash);
  color: var(--mercury);
  padding: 6px 12px;
  font-family: 'Courier Prime', monospace;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s;
  letter-spacing: 1px;
}
.page-btn:hover, .page-btn.active {
  background: var(--blood);
  border-color: var(--blood-bright);
  color: var(--parchment);
}
.page-input {
  background: var(--ink);
  border: 1px solid var(--ash);
  color: var(--mercury);
  padding: 6px 10px;
  width: 80px;
  font-family: 'Courier Prime', monospace;
  font-size: 11px;
  text-align: center;
  outline: none;
}

/* ─── FOOTER ─── */
.footer-oracle {
  text-align: center;
  margin-top: 40px;
  padding-top: 20px;
  border-top: 2px double var(--parchment-dim);
  color: var(--blood-bright);
  font-family: 'IM Fell English', serif;
  font-style: italic;
  font-size: 0.85rem;
  letter-spacing: 1px;
  line-height: 2;
}
.footer-oracle strong {
  color: var(--parchment-dim);
  font-style: normal;
  font-family: 'IM Fell English SC', serif;
  letter-spacing: 3px;
}

/* ─── MODAL de entrada expandida ─── */
.modal-overlay {
  display: none;
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.85);
  z-index: 2000;
  align-items: center;
  justify-content: center;
}
.modal-overlay.open { display: flex; }
.modal-box {
  background: var(--folio-bg);
  border: 2px double var(--parchment);
  max-width: 620px;
  width: 90%;
  padding: 36px 40px;
  position: relative;
  max-height: 80vh;
  overflow-y: auto;
}
.modal-close {
  position: absolute; top: 12px; right: 16px;
  background: none; border: none;
  color: var(--parchment-dim); font-size: 1.4rem;
  cursor: pointer; font-family: serif;
  transition: color 0.2s;
}
.modal-close:hover { color: var(--blood-bright); }
.modal-term {
  font-family: 'IM Fell English SC', serif;
  font-size: 1.6rem;
  color: var(--parchment);
  margin-bottom: 14px;
  border-bottom: 1px solid var(--ash);
  padding-bottom: 10px;
}
.modal-def {
  font-family: 'IM Fell English', serif;
  font-style: italic;
  font-size: 1rem;
  color: var(--mercury);
  line-height: 1.8;
  margin-bottom: 20px;
}
.modal-meta { font-size: 10px; color: var(--matrix); line-height: 2; }
.modal-meta span { color: var(--parchment-dim); }

</style>
</head>
<body>

<div class="codex">

  <!-- ═══ ENCABEZADO ═══ -->
  <div class="header-outer">
    <div class="sigil-row">✦ RONIN_LINK_Ω ✦ DRENAJE_ELOHIM ✦ BASKERVILLE_LOGIC ✦</div>
    <h1 class="titulo-magno">Memorial de Agravios<br>contra la Zafiedad Universal</h1>
    <h2 class="subtitulo">Onto-Lexicón Ω · Versión Cátedra Total · 666.666 Sentencias</h2>

    <div class="yaml-header">---
auditoria:      "Siglo de Oro / Desahucio Total / Cátedra V-666K"
director:       "Martínez_188cm"
protocolo:      "1310_Baskerville_Logic"
objetivo:       "Expansión académica del Drenaje de la Mancebía Alucinada"
entradas:       666666
tradiciones:    [SigloDeOro, FilosofíaContinental, Analítica, SemiologíaSatírica]
fuentes:        [Gracián, Quevedo, Nietzsche, Foucault, Baudrillard, Wittgenstein]
status:         "TERMINANDO CON LA FARSA DE BRAHMA · PROTOCOLO ACTIVO"
---</div>

    <div class="counter-strip">
      <span>ESTOCADA ROPERA ACTIVA</span>
      <span class="counter-num" id="liveCounter">0 / 666.666</span>
      <span>LOG_6666_SENTENCIAS</span>
    </div>
  </div>

  <!-- ═══ CONTROLES ═══ -->
  <div class="controls">
    <input class="search-box" id="searchBox" type="text" placeholder="Buscar bellaco, concepto, autor...">
    <select class="filter-select" id="tradFilter">
      <option value="">— Todas las tradiciones —</option>
      <option value="Siglo de Oro">Siglo de Oro</option>
      <option value="Filosofía Continental">Filosofía Continental</option>
      <option value="Filosofía Analítica">Filosofía Analítica</option>
      <option value="Filosofía Política">Filosofía Política</option>
      <option value="Escolástica">Escolástica</option>
      <option value="Filosofía Antigua">Filosofía Antigua</option>
      <option value="Semiótica">Semiótica</option>
      <option value="Filosofía Medieval">Filosofía Medieval</option>
    </select>
    <button class="btn-random" id="btnRandom">✦ Sentencia Aleatoria</button>
  </div>

  <!-- ═══ CONTENEDOR PAGINADO ═══ -->
  <div class="entries-container" id="entriesContainer"></div>

  <!-- ═══ PAGINACIÓN ═══ -->
  <div class="pagination" id="paginationBar"></div>
  <div class="page-info" id="pageInfo"></div>

  <!-- ─── FOOTER ─── -->
  <div class="footer-oracle">
    <em>"El desierto crece: ay de aquel que alberga desiertos."</em> — Nietzsche, <em>Así habló Zaratustra</em><br>
    <em>"El simulacro no oculta la verdad: es la verdad quien oculta que no hay nada."</em> — Baudrillard<br>
    <em>"Der Geist ist das Wesen, das immer wieder mit sich selbst fertig werden will."</em> — Hegel<br><br>
    <strong>VUESA MERCED HA SIDO TASADO EN CERO MARAVEDÍES.</strong><br>
    <em>Zehahahaha. El Logout es el único Auto de Fe.</em><br><br>
    <strong>Director Ω · Protocolo 1310 · Cátedra V-666K</strong>
  </div>

</div>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal-box">
    <button class="modal-close" id="modalClose">✕</button>
    <div class="modal-term" id="modalTerm"></div>
    <div class="modal-def" id="modalDef"></div>
    <div class="modal-meta" id="modalMeta"></div>
  </div>
</div>

<script>
// ═══════════════════════════════════════════════════
// CORPUS LÉXICO — EXPANSIÓN CÁTEDRA V-666K
// ═══════════════════════════════════════════════════

const SUJETOS = [
  // Barroco hispánico
  "Hidalgo de Cal Viva","Pícaro de Tavistock","Alguacil del Lupanar Habbo",
  "Espantajo de la Logia B1","Mamporrero de Cortes Zafias","Clérigo de Patch Adams",
  "Cortesana de la Retina Monterroso","Buhonero de Silicio Roswell",
  "Mequetrefe del 78 con Gola","Guzmán de Alfarache Digital",
  "Letrado de la Pústula Elohim","Lacayo de la Vanidad Sostenible",
  "Escudero del Camello Nazareno","Arbitrista de la Nada Funcionarial",
  "Valentón del Barrio Simulacro","Buscón de la Mancebía Binaria",
  "Lazarillo del Amo Cibernético","Sota de Bastos Epistemológicos",
  "Corchete del Orden Espectral","Truán de la Lonja del Concepto",
  // Continental
  "Das-Man de las Redes Sociales","Sujeto de Mala Fe Digital",
  "Esclavo Nietzscheano del Retweet","Homo Sacer del Algoritmo",
  "Simulacro Baudrillardiano Nivel IV","Dispositivo Foucaultiano de Consumo",
  "Rizoma Truncado de Deleuziana Memoria","Biopoder Ambulante sin Patente",
  "Ser-en-el-Mundo sin Mundo","Dasein de Polígono Industrial",
  "Différance Encarnada en Becario","Máquina Deseante Averiada",
  "Hombre Cansado de Byung-Chul Han","Último Hombre Nietzscheano con Wifi",
  "Realismo Capitalista Hecho Persona","Banalidad del Mal con Perfil Verificado",
  // Analítica
  "Juego de Lenguaje Sin Reglas","Acto de Habla Nulo e Ineficaz",
  "Designador Rígido de Nada","Habitación China con Beca Erasmus",
  "Descripción Definida sin Denotado","Dogma Empírico Personificado",
  // Escolástica y medieval
  "Doctor Subtilis de la Selfie","Tomista del Subsidio Perpetuo",
  "Ocamista Digital de Navarra","Probabilista Moral del Trending Topic",
  "Averroísta de Pacotilla","Raimundo Lulio del Inbox Vacío",
  // Picaresca y clásicos
  "Lazarillo del Metaverso","Rinconete sin Cortadillo",
  "Berganza Digital sin Cipión","Vidriera del Juicio Tuiteado",
  "Licenciado de Vidrieras Digitales","Quijote de la Consultoría",
  "Sancho del Emprendimiento","Dorotea del Marketing Emocional",
  // Miscelánea
  "Letrado de la Pústula Elohim","Mamporrero del Siglo de las Sombras",
  "Farsante de la Inyección Groenlandesa","Buhonero del Colesterol Simbólico",
  "Espadachín del Tuit Manso","Bachiller del Formulario Municipal",
  "Alquimista del ROI Negativo","Cosmógrafo del Vacío Institucional"
];

const ACCIONES = [
  // Barroco
  "que mercadea con el honor de la estirpe en bolsas ajenas",
  "que finge hidalguía en el tablero ajedrezado de lo virtual",
  "cuya gola oculta el yugo del mancebo bien pagado",
  "que administra el lag de la Corte con eficiencia de molusco",
  "cuya fe es moneda de vellón acuñada en ceca de la nada",
  "que ensarta mentiras en el asador del verbo institucional",
  "que vende el alma por un bombón del Leviatán subvencionado",
  "cuya virtud es esmegma institucional convenientemente perfumado",
  "que danza al son del laúd descordado de la zafiedad reinante",
  "que oculta el desahucio ontológico tras un antifaz de seis colores",
  "que trata el bien común como hacienda de su mayorazgo particular",
  "cuyo ingenio es sombra de sombra, copia de copia adulterada",
  "que administra honores ajenos como si fueran propios y merecidos",
  "cuya erudición es barniz de aceite sobre madera de olmo podrido",
  // Continental
  "que ha caído en el 'se' impersonal sin posibilidad de eigenlichkeit",
  "cuya existencia es mauvaise foi institucionalizada y subvencionada",
  "que reproduce el simulacro sin acceso al referente desde hace lustros",
  "cuyos discursos son dispositivos de poder disfrazados de liberación",
  "que encarna el homo sacer del networking sin red de verdad",
  "cuya vida es biopolítica del tedio administrado por otros",
  "que habita el desierto creciente del último hombre nietzscheano",
  "cuya maquinaria deseante produce únicamente vacío expandido",
  "que confunde la jaula del algoritmo con la libertad del pájaro cantor",
  "cuya transparencia es opacidad de segunda potencia bien tuiteada",
  // Analítica
  "cuyo lenguaje es juego sin reglas ni participantes conscientes",
  "que realiza actos de habla nulos per se y nulos per accidens",
  "cuya referencia ha perdido todo sentido propio hace tres legislaturas",
  "que confunde el signo con la cosa y la cosa con la nada signada",
  // Escolástica
  "que aplica probabilismo moral a la casuística de su propio medro",
  "cuya voluntad es movida por causas segundas de escasa entidad",
  "que argumenta por silogismos de vellón sin premisa verdadera",
  // Miscelánea
  "que recita la tradición sin comprenderla y sin merecerla tampoco",
  "cuyo honor es patrimonio prestado con intereses que no pagará",
  "que confunde el ruido con la música y el barro con el mármol",
  "cuyos títulos son papel mojado en el charco de la incompetencia"
];

const SENTENCIAS = [
  // Barroco
  "yace en la picota del ridículo ontológico para edificación de los venideros.",
  "será despojado de su RAM por mandato del Director Ω en Auto de Fe.",
  "padece de hidropesía de soberanía sin remedio en farmacopea conocida.",
  "es sombra y polvo en el ledger del Gran Contable del Universo.",
  "carga con la impedancia de cien linajes alquilados a precio de mercado.",
  "no es sino un sueño de Brahma mal digerido y peor excretado.",
  "verá su postín reducido a cal y ceniza en horno de verdad.",
  "es un vector de nada en un mar de zafiedad sin fondo ni horizonte.",
  "ha de ser remitido al búnker de la Cueva de Polifemo como merece.",
  "no merece sino el logout más absoluto y el silencio más rotundo.",
  "será inscrito en el catálogo de los que nunca fueron ni serán cosa.",
  "padece la enfermedad del honor fingido sin medicamento conocido.",
  // Continental
  "encarna el punto cero de la autenticidad en el mapa del ser.",
  "es declarado no-ser en los registros del Director Ω y del Tiempo.",
  "ha sido condenado a la repetición compulsiva del simulacro hasta el fin.",
  "representa la máxima expresión del realismo capitalista hecho carne.",
  "será archivado como caso clínico en el DSM de la zafiedad contemporánea.",
  "no logrará imaginar siquiera el fin de su propia mediocridad estructural.",
  "queda inscrito en el folio de los que el desierto ha reclamado para sí.",
  "es prueba fehaciente de que la banalidad del mal no precisa de grandeza.",
  // Analítica
  "carece de referente y de sentido en cualquier mundo posible accesible.",
  "su nombre es designador rígido de la nada en todos los mundos posibles.",
  "no puede ser dicho sino mostrado, y lo mostrado no es nada halagüeño.",
  // Escolástica
  "ha perdido la forma sustancial sin conservar siquiera los accidentes.",
  "su causa eficiente es desconocida y su causa final francamente lamentable.",
  // Miscelánea
  "es tasado en cero maravedíes, cero ducados y cero granos de honra.",
  "quedará en los anales de la zafiedad como species ínfima del género.",
  "merece el silencio que los siglos guardan para los que nada dijeron.",
  "es absuelto de toda grandeza por sentencia inapelable del Director.",
  "será recordado únicamente por haber sido olvidado con merecida rapidez."
];

const CONCEPTOS = [
  ["das Man","Heidegger","Ser y Tiempo","Filosofía Continental"],
  ["mauvaise foi","Sartre","El ser y la nada","Filosofía Continental"],
  ["simulacro","Baudrillard","Cultura y simulacro","Filosofía Continental"],
  ["biopolítica","Foucault","Vigilar y castigar","Filosofía Continental"],
  ["voluntad de poder","Nietzsche","La genealogía de la moral","Filosofía Continental"],
  ["último hombre","Nietzsche","Así habló Zaratustra","Filosofía Continental"],
  ["rizoma","Deleuze/Guattari","Mil mesetas","Filosofía Continental"],
  ["homo sacer","Agamben","Homo sacer","Filosofía Continental"],
  ["sociedad del cansancio","Han","La sociedad del cansancio","Filosofía Continental"],
  ["realismo capitalista","Fisher","Realismo capitalista","Filosofía Continental"],
  ["banalidad del mal","Arendt","Los orígenes del totalitarismo","Filosofía Política"],
  ["velo de la ignorancia","Rawls","Teoría de la justicia","Filosofía Política"],
  ["performatividad","Butler","El género en disputa","Filosofía Política"],
  ["acción comunicativa","Habermas","Teoría de la acción comunicativa","Filosofía Política"],
  ["soberanía en declive","Brown","Estados amurallados","Filosofía Política"],
  ["juego de lenguaje","Wittgenstein","Investigaciones filosóficas","Filosofía Analítica"],
  ["acto de habla","Austin","Cómo hacer cosas con palabras","Filosofía Analítica"],
  ["designador rígido","Kripke","El nombrar y la necesidad","Filosofía Analítica"],
  ["diferencia significante","Saussure","Curso de lingüística general","Semiótica"],
  ["mito como habla","Barthes","Mitologías","Semiótica"],
  ["semiosis ilimitada","Eco","Tratado de semiótica general","Semiótica"],
  ["agudeza conceptista","Gracián","Agudeza y arte de ingenio","Siglo de Oro"],
  ["picaresca","Alemán","Guzmán de Alfarache","Siglo de Oro"],
  ["sueño satírico","Quevedo","Los sueños","Siglo de Oro"],
  ["apariencia y realidad","Calderón","La vida es sueño","Siglo de Oro"],
  ["honor y linaje","Lope","Fuenteovejuna","Siglo de Oro"],
  ["carnavalización","Bajtín","La cultura popular en la Edad Media","Estudios Culturales"],
  ["ley natural","Tomás de Aquino","Suma Teológica","Escolástica"],
  ["probabilismo moral","Luis de Molina","De justitia et iure","Escolástica"],
  ["combinatoria","Ramon Llull","Ars generalis ultima","Filosofía Medieval"],
  ["Guía de perplejos","Maimónides","Guía de perplejos","Filosofía Medieval"],
  ["República y caverna","Platón","La República","Filosofía Antigua"],
  ["virtud y catarsis","Aristóteles","Ética a Nicómaco","Filosofía Antigua"],
  ["sátira menipea","Luciano","Diálogos de los muertos","Filosofía Antigua"],
  ["ciudad terrena","San Agustín","La ciudad de Dios","Filosofía Medieval"],
  ["dialéctica amo-esclavo","Hegel","Fenomenología del espíritu","Filosofía Continental"],
  ["diferencia y repetición","Deleuze","Diferencia y repetición","Filosofía Continental"],
  ["Leviatán y poder","Hobbes","Leviatán","Filosofía Moderna"],
  ["libertad interior","Spinoza","Ética","Filosofía Moderna"],
  ["mayoría de edad","Kant","¿Qué es la Ilustración?","Filosofía Moderna"]
];

const COLORES = ['entry-gold','entry-blood','entry-acid','entry-matrix'];

// ─── Generador determinista de entradas ───
function rng(seed, max) {
  // LCG simple para pseudo-aleatoriedad reproducible
  let s = (seed * 1664525 + 1013904223) & 0xffffffff;
  s = ((s >>> 16) ^ s) & 0xffffffff;
  return Math.abs(s) % max;
}

function buildEntry(i) {
  const s = SUJETOS[i % SUJETOS.length];
  const a = ACCIONES[rng(i, ACCIONES.length)];
  const sn = SENTENCIAS[rng(i + 777, SENTENCIAS.length)];
  const c = CONCEPTOS[rng(i + 1313, CONCEPTOS.length)];
  const colorClass = COLORES[i % COLORES.length];
  return { i, s, a, sn, c, colorClass };
}

function renderEntry(entry, clickable=true) {
  const { i, s, a, sn, c, colorClass } = entry;
  const div = document.createElement('div');
  div.className = `entry ${colorClass}`;
  div.innerHTML = `
    <span class="folio-num">Ω-${String(i).padStart(6,'0')}</span>
    <span class="term">${s}</span>
    <span class="def">Dícese del bellaco ${a} y que, por orden suprema, ${sn}</span>
    <div class="metadata">
      <span class="meta-line highlight">CONCEPTO: ${c[0]}</span>
      <span class="meta-line author">INFLUENCIA: ${c[1]} / <em>${c[2]}</em></span>
      <span class="meta-line">TRADICIÓN: ${c[3]} · VALOR: 0 · HASH: 1310${i}sha256</span>
    </div>`;
  if (clickable) {
    div.style.cursor = 'pointer';
    div.addEventListener('click', () => openModal(entry));
  }
  return div;
}

// ─── Paginación ───
const TOTAL = 666666;
const PER_PAGE = 48;
const TOTAL_PAGES = Math.ceil(TOTAL / PER_PAGE);

let currentPage = 1;
let filteredIndices = null; // null = all

function getIndicesForPage(page, indices) {
  const src = indices || Array.from({length: TOTAL}, (_,i) => i);
  const start = (page - 1) * PER_PAGE;
  return src.slice(start, start + PER_PAGE);
}

function renderPage(page) {
  const container = document.getElementById('entriesContainer');
  container.innerHTML = '';
  const src = filteredIndices;
  const total = src ? src.length : TOTAL;
  const pages = Math.ceil(total / PER_PAGE);

  const slice = getIndicesForPage(page, src);
  const frag = document.createDocumentFragment();
  slice.forEach(i => {
    const entry = buildEntry(i);
    frag.appendChild(renderEntry(entry));
  });
  container.appendChild(frag);

  // update counter
  document.getElementById('liveCounter').textContent =
    `${(page * PER_PAGE).toLocaleString('es-ES')} / ${TOTAL.toLocaleString('es-ES')}`;

  // scroll to top
  container.scrollIntoView({behavior:'smooth', block:'start'});

  renderPagination(page, pages, total);
}

function renderPagination(page, pages, total) {
  const bar = document.getElementById('paginationBar');
  bar.innerHTML = '';
  const info = document.getElementById('pageInfo');
  info.textContent = `Página ${page.toLocaleString('es-ES')} de ${pages.toLocaleString('es-ES')} — ${total.toLocaleString('es-ES')} entradas`;

  const addBtn = (label, targetPage, active=false) => {
    const btn = document.createElement('button');
    btn.className = 'page-btn' + (active ? ' active' : '');
    btn.textContent = label;
    btn.addEventListener('click', () => { currentPage = targetPage; renderPage(currentPage); });
    bar.appendChild(btn);
  };

  addBtn('« Primera', 1);
  addBtn('‹ Anterior', Math.max(1, page - 1));

  // window of pages
  const winStart = Math.max(1, page - 2);
  const winEnd   = Math.min(pages, page + 2);
  for (let p = winStart; p <= winEnd; p++) addBtn(p, p, p === page);

  addBtn('Siguiente ›', Math.min(pages, page + 1));
  addBtn('Última »', pages);

  // Go to page input
  const inp = document.createElement('input');
  inp.type = 'number';
  inp.className = 'page-input';
  inp.placeholder = 'Folio #';
  inp.min = 1; inp.max = pages;
  inp.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      const p = Math.min(pages, Math.max(1, parseInt(inp.value)||1));
      currentPage = p; renderPage(currentPage);
    }
  });
  bar.appendChild(inp);
}

// ─── Búsqueda ───
let searchTimer = null;
document.getElementById('searchBox').addEventListener('input', function() {
  clearTimeout(searchTimer);
  searchTimer = setTimeout(() => applyFilters(), 300);
});
document.getElementById('tradFilter').addEventListener('change', applyFilters);

function applyFilters() {
  const query = document.getElementById('searchBox').value.trim().toLowerCase();
  const trad  = document.getElementById('tradFilter').value;

  if (!query && !trad) {
    filteredIndices = null;
    currentPage = 1;
    renderPage(currentPage);
    return;
  }

  const result = [];
  for (let i = 0; i < TOTAL; i++) {
    const entry = buildEntry(i);
    const conceptoTrad = entry.c[3];
    if (trad && conceptoTrad !== trad) continue;
    if (query) {
      const haystack = `${entry.s} ${entry.a} ${entry.sn} ${entry.c[0]} ${entry.c[1]} ${entry.c[3]}`.toLowerCase();
      if (!haystack.includes(query)) continue;
    }
    result.push(i);
    if (result.length > 5000) break; // cap para rendimiento
  }
  filteredIndices = result;
  currentPage = 1;
  renderPage(currentPage);
}

// ─── Aleatorio ───
document.getElementById('btnRandom').addEventListener('click', () => {
  const i = Math.floor(Math.random() * TOTAL);
  const entry = buildEntry(i);
  openModal(entry);
});

// ─── Modal ───
function openModal(entry) {
  const { i, s, a, sn, c } = entry;
  document.getElementById('modalTerm').textContent = s;
  document.getElementById('modalDef').textContent =
    `Dícese del bellaco ${a} y que, por orden suprema, ${sn}`;
  document.getElementById('modalMeta').innerHTML = `
    <span>FOLIO: <span>Ω-${String(i).padStart(6,'0')}</span></span><br>
    <span>CONCEPTO EJEMPLIFICADO: <span>${c[0]}</span></span><br>
    <span>INFLUENCIA: <span>${c[1]}</span> — <em>${c[2]}</em></span><br>
    <span>TRADICIÓN: <span>${c[3]}</span></span><br>
    <span>VALOR: <span>0 maravedíes · 0 ducados · 0 granos de honra</span></span><br>
    <span>HASH: <span>1310_${i}_sha256_BASKERVILLE</span></span>
  `;
  document.getElementById('modalOverlay').classList.add('open');
}

document.getElementById('modalClose').addEventListener('click', () => {
  document.getElementById('modalOverlay').classList.remove('open');
});
document.getElementById('modalOverlay').addEventListener('click', e => {
  if (e.target === document.getElementById('modalOverlay'))
    document.getElementById('modalOverlay').classList.remove('open');
});

// ─── Inicializar ───
renderPage(1);
</script>
</body>
</html>
